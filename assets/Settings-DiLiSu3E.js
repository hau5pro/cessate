import{r as s,n as Ge,o as yt,j as i,p as xt,B as G,q as St,e as te,s as bt,W as vt,t as Ct,A as Rt,L as Et,u as It}from"./mui-MagnalEl.js";import{B as fe}from"./BaseButton-eIzhkely.js";import{M as wt,P as Mt}from"./CustomIcons-CWV8PEy9.js";import{D as se,o as Le,p as ze,t as me,A as qe,m as he,q as it,h as Oe,f as _t,L as Nt,v as Tt}from"./index-w7FQEbni.js";import{d as jt,n as Dt,p as Vt,f as kt,r as At,q as Ye,l as Ze,h as Pt,w as Ft,s as Bt}from"./firebase-CZ1iWosV.js";const at=s.createContext(void 0);function ke(){const e=s.useContext(at);if(e===void 0)throw new Error("Base UI: NumberFieldRootContext is missing. NumberField parts must be placed within <NumberField.Root>.");return e}const Lt=60,Ot=400,Ut=50,Ht=3,Gt=8,Re=1;function Te(e){return e&&e.ownerDocument||document}function Ae(e){return Te(e).defaultView||window}function Wt(e,t){const n=Ae(t),r=t.getBoundingClientRect();if(r&&e!=null)return{x:r.left-e/2,y:r.top-e/2,width:r.right+e/2,height:r.bottom+e/2};const o=n.visualViewport;return o?{x:o.offsetLeft,y:o.offsetTop,width:o.offsetLeft+o.width,height:o.offsetTop+o.height}:{x:0,y:0,width:n.document.documentElement.clientWidth,height:n.document.documentElement.clientHeight}}function $t(e,t){const n=Ae(e).visualViewport;if(!n)return()=>{};function r(){n&&(t.current=n.scale)}return r(),n.addEventListener("resize",r),()=>{n.removeEventListener("resize",r)}}const ne=typeof window<"u"?s.useLayoutEffect:s.useEffect;function je(e){const t=s.useRef(e);return ne(()=>{t.current=e}),t}function Kt(){if(typeof navigator>"u")return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e!=null&&e.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints}}function Xt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none")}function zt(){const e=Kt();return e.platform==="MacIntel"&&e.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(e.platform)}function re(...e){if(e.length===0)return{};if(e.length===1)return Je(e[0],{});let t=Je(e[0],{});for(let n=1;n<e.length;n+=1){const r=e[n];r&&(ut(r)?t=r(t):t=qt(t,r))}return t??{}}function Je(e,t){return ut(e)?e(t):e??{}}function qt(e,t){return t?e?Object.entries(t).reduce((n,[r,o])=>(Yt(r,o)?n[r]=Zt(e[r],o):r==="style"?n[r]=Qt(e.style,o):r==="className"?n[r]=en(e.className,o):n[r]=o,n),{...e}):t:e||{}}function Yt(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function ut(e){return typeof e=="function"}function Zt(e,t){return n=>{if(tn(n)){const o=n;Jt(o);const u=t(o);return o.baseUIHandlerPrevented||e==null||e(o),u}const r=t(n);return e==null||e(n),r}}function Jt(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function Qt(e,t){if(t||e)return{...e,...t}}function en(e,t){return t?e?t+" "+e:t:e}function tn(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}let nn=function(e){return e.scrubbing="data-scrubbing",e.disabled="data-disabled",e.readonly="data-readonly",e.required="data-required",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});function ee(e){const t=s.useRef(e);return ne(()=>{t.current=e}),s.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function rn(e){const{disabled:t,readOnly:n,value:r,inputRef:o,incrementValue:u,getStepAmount:c}=e,f=je(r),l=s.useRef(null),d=s.useRef(null),m=s.useRef(!1),a=s.useRef(null),S=s.useRef({x:0,y:0}),I=s.useRef(1),[g,w]=s.useState(!1),[N,M]=s.useState(!1),[T,V]=s.useState(!1);s.useEffect(()=>{if(!(!g||!a.current))return $t(a.current,I)},[g]);const C=ee((D,h)=>{a.current&&(a.current.style.transform=`translate3d(${D}px,${h}px,0) scale(${1/I.current})`)}),y=s.useCallback(({movementX:D,movementY:h})=>{const v=a.current,R=d.current,b=l.current;if(!v||!R||!b)return;const E=Wt(b.teleportDistance,R),B=S.current,p={x:Math.round(B.x+D),y:Math.round(B.y+h)},A=v.offsetWidth,k=v.offsetHeight;p.x+A/2<E.x?p.x=E.width-A/2:p.x+A/2>E.width&&(p.x=E.x-A/2),p.y+k/2<E.y?p.y=E.height-k/2:p.y+k/2>E.height&&(p.y=E.y-k/2),S.current=p,C(p.x,p.y)},[C]),_=s.useCallback((D,{clientX:h,clientY:v})=>{Ge.flushSync(()=>{w(D)});const R=a.current;if(!R||!D)return;const b={x:h-R.offsetWidth/2,y:v-R.offsetHeight/2};S.current=b,C(b.x,b.y)},[C]),j=s.useCallback((D={})=>re({role:"presentation",[nn.scrubbing]:g||void 0,style:{touchAction:"none",WebkitUserSelect:"none",userSelect:"none"},async onPointerDown(h){var b;const v=!h.button||h.button===0;if(h.defaultPrevented||n||!v||t)return;const R=h.pointerType==="touch";if(M(R),h.pointerType==="mouse"&&(h.preventDefault(),(b=o.current)==null||b.focus()),m.current=!0,_(!0,h.nativeEvent),!R&&!Xt())try{await Te(d.current).body.requestPointerLock(),V(!1)}catch{V(!0)}finally{Ge.flushSync(()=>{_(!0,h.nativeEvent)})}}},D),[n,t,_,o,g]);return s.useEffect(function(){if(!o.current||t||n)return;let h=0;function v(E){try{Te(d.current).exitPointerLock()}catch{}finally{m.current=!1,_(!1,E)}}function R(E){if(!m.current||!l.current)return;E.preventDefault(),y(E);const{direction:B,pixelSensitivity:p}=l.current,{movementX:A,movementY:k}=E;if(h+=B==="vertical"?k:A,Math.abs(h)>=p){h=0;const q=B==="vertical"?-k:A;u(q*(c(E)??Re),1)}}const b=Ae(o.current);return b.addEventListener("pointerup",v,!0),b.addEventListener("pointermove",R,!0),()=>{b.removeEventListener("pointerup",v,!0),b.removeEventListener("pointermove",R,!0)}},[t,n,u,f,c,o,_,y]),s.useEffect(function(){const h=d.current;if(!h||t||n)return;function v(R){R.touches.length===1&&R.preventDefault()}return h.addEventListener("touchstart",v),()=>{h.removeEventListener("touchstart",v)}},[t,n]),s.useMemo(()=>({isScrubbing:g,isTouchInput:N,isPointerLockDenied:T,getScrubAreaProps:j,scrubAreaCursorRef:a,scrubAreaRef:d,scrubHandleRef:l}),[g,N,T,j])}const Qe=new Map;function De(e,t){const n=JSON.stringify({locale:e,options:t}),r=Qe.get(n);if(r)return r;const o=new Intl.NumberFormat(e,t);return Qe.set(n,o),o}function et(e,t,n){return e==null?"":De(t,n).format(e)}function on(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function Ue(e,t={}){return parseFloat(De("en-US",{maximumFractionDigits:t.maximumFractionDigits,minimumFractionDigits:t.minimumFractionDigits,useGrouping:!1}).format(e))}function sn(e,{step:t,minWithDefault:n,maxWithDefault:r,minWithZeroDefault:o,format:u,snapOnStep:c,small:f}){if(e===null)return e;const l=on(e,n,r);if(t!=null&&c){if(f){const m=(l-o)/t,a=Math.round(m),S=o+a*t;return Ue(S,u)}const d=n!==Number.MIN_SAFE_INTEGER?n:o;if(t>0){const m=l-t,a=Math.floor((m-d)/t);return Ue(d+a*t+t,u)}if(t<0){const m=Math.abs(t),a=l-t,S=Math.ceil((a-d)/m);return Ue(d+S*m+t,u)}}return l}const ct=["零","一","二","三","四","五","六","七","八","九"],lt=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"],dt=["%","٪"],We=new RegExp(`[${lt.join("")}]`,"g"),$e=new RegExp(`[${ct.join("")}]`,"g"),an=new RegExp(`[${dt.join("")}]`);function Ke(e,t){const n=De(e,t).formatToParts(11111.1),r={};return n.forEach(o=>{r[o.type]=o.value}),De(e).formatToParts(.1).forEach(o=>{o.type==="decimal"&&(r[o.type]=o.value)}),r}function Ce(e,t,n){let r=t;r===void 0&&(We.test(e)?r="ar":$e.test(e)&&(r="zh"));const{group:o,decimal:u,currency:c,unit:f}=Ke(r,n);let l=null;o&&(l=new RegExp("\\p{Zs}","u").test(o)?new RegExp("\\p{Zs}","gu"):new RegExp(`\\${o}`,"g"));const m=[{regex:o?l:null,replacement:""},{regex:u?new RegExp(`\\${u}`,"g"):null,replacement:"."},{regex:c?new RegExp(`\\${c}`,"g"):null,replacement:""},{regex:f?new RegExp(`\\${f}`,"g"):null,replacement:""},{regex:We,replacement:w=>lt.indexOf(w).toString()},{regex:$e,replacement:w=>ct.indexOf(w).toString()}].reduce((w,{regex:N,replacement:M})=>N?w.replace(N,M):w,e);let a=parseFloat(m);const S=n==null?void 0:n.style,I=S==="unit"&&(n==null?void 0:n.unit)==="percent",g=an.test(e)||S==="percent";return!I&&g&&(a/=100),Number.isNaN(a)?null:a}function un({controlled:e,default:t,name:n,state:r="value"}){const{current:o}=s.useRef(e!==void 0),[u,c]=s.useState(t),f=o?e:u,l=s.useCallback(d=>{o||c(d)},[]);return[f,l]}function cn(){const[,e]=s.useState({});return s.useCallback(()=>{e({})},[])}let tt=0;function ln(e,t="mui"){const[n,r]=s.useState(e),o=e||n;return s.useEffect(()=>{n==null&&(tt+=1,r(`${t}-${tt}`))},[n,t]),o}const dn={...yt},nt=dn.useId;function fn(e,t){if(nt!==void 0){const n=nt();return e??`${t}-${n}`}return ln(e,t)}function mn(e){return fn(e,"base-ui")}let rt=function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});const ft={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},hn={valid(e){return e===null?null:e?{[rt.valid]:""}:{[rt.invalid]:""}}},Q=()=>{},pn=s.createContext({invalid:void 0,controlId:void 0,setControlId:Q,labelId:void 0,setLabelId:Q,messageIds:[],setMessageIds:Q,name:void 0,validityData:{state:ft,errors:[],error:"",value:"",initialValue:null},setValidityData:Q,disabled:void 0,touched:!1,setTouched:Q,dirty:!1,setDirty:Q,filled:!1,setFilled:Q,focused:!1,setFocused:Q,validate:()=>null,validationMode:"onBlur",validationDebounceTime:0,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1}});function Ee(e=!0){const t=s.useContext(pn);if(t.setControlId===Q&&!e)throw new Error("Base UI: FieldRootContext is missing. Field parts must be placed within <Field.Root>.");return t}const gn=s.createContext({formRef:{current:{fields:new Map}},errors:{},onClearErrors:()=>{}});function mt(){return s.useContext(gn)}function ht(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}const yn=Object.keys(ft);function pt(){const{setValidityData:e,validate:t,messageIds:n,validityData:r,validationMode:o,validationDebounceTime:u,invalid:c,markedDirtyRef:f,controlId:l,state:d}=Ee(),{formRef:m}=mt(),a=s.useRef(-1),S=s.useRef(null);s.useEffect(()=>()=>{window.clearTimeout(a.current)},[]);const I=ee(async N=>{const M=S.current;if(!M)return;function T(h){return yn.reduce((v,R)=>(v[R]=h.validity[R],!h.validity.customError&&!f.current&&(v[R]=R==="valid"),v),{})}window.clearTimeout(a.current);const V=t(N);let C=null;typeof V=="object"&&V!==null&&"then"in V?C=await V:C=V;let y="";C!==null&&(y=Array.isArray(C)?C.join(`
`):C),M.setCustomValidity(y);const _=T(M);let j=[];Array.isArray(C)?j=C:C?j=[C]:M.validationMessage&&(j=[M.validationMessage]);const D={value:N,state:_,error:Array.isArray(C)?C[0]:C??M.validationMessage,errors:j,initialValue:r.initialValue};if(l){const h=m.current.fields.get(l);h&&m.current.fields.set(l,{...h,...ht(D,c)})}e(D)}),g=s.useCallback((N={})=>re({...n.length&&{"aria-describedby":n.join(" ")},...d.valid===!1&&{"aria-invalid":!0}},N),[n,d.valid]),w=s.useCallback((N={})=>re({onChange(M){if(M.nativeEvent.defaultPrevented||c||o!=="onChange")return;const T=M.currentTarget;if(T.value===""){I(T.value);return}window.clearTimeout(a.current),u?a.current=window.setTimeout(()=>{I(T.value)},u):I(T.value)}},g(N)),[g,c,o,u,I]);return s.useMemo(()=>({getValidationProps:g,getInputValidationProps:w,inputRef:S,commitValidation:I}),[g,w,I])}function Ve(...e){const t=s.useRef(void 0),n=s.useCallback(r=>{const o=e.map(u=>{if(u==null)return null;if(typeof u=="function"){const c=u,f=c(r);return typeof f=="function"?f:()=>{c(null)}}return u.current=r,()=>{u.current=null}});return()=>{o.forEach(u=>u==null?void 0:u())}},e);return s.useMemo(()=>e.every(r=>r==null)?null:r=>{t.current&&(t.current(),t.current=void 0),r!=null&&(t.current=n(r))},e)}function xn(e){const{formRef:t}=mt(),{invalid:n,markedDirtyRef:r,validityData:o,setValidityData:u}=Ee(),{value:c,id:f,controlRef:l,commitValidation:d}=e,m=je(e.getValue);ne(()=>{var S;let a=c;a===void 0&&(a=(S=m.current)==null?void 0:S.call(m)),o.initialValue===null&&a!==o.initialValue&&u(I=>({...I,initialValue:a}))},[u,c,o.initialValue,m]),ne(()=>{f&&t.current.fields.set(f,{controlRef:l,validityData:ht(o,n),validate(){var S;let a=c;a===void 0&&(a=(S=m.current)==null?void 0:S.call(m)),r.current=!0,Ge.flushSync(()=>d(a))}})},[d,l,t,m,f,n,r,o,c])}function Sn(e){const{id:t,name:n,min:r,max:o,smallStep:u=.1,step:c=1,largeStep:f=10,required:l=!1,disabled:d=!1,invalid:m=!1,readOnly:a=!1,allowWheelScrub:S=!1,snapOnStep:I=!1,format:g,value:w,onValueChange:N,defaultValue:M,locale:T}=e,{setControlId:V,validationMode:C,setDirty:y,validityData:_,setValidityData:j,disabled:D,setFilled:h}=Ee(),{inputRef:v,commitValidation:R}=pt(),b=D||d,E=r??Number.MIN_SAFE_INTEGER,B=o??Number.MAX_SAFE_INTEGER,p=r??0,A=g==null?void 0:g.style,k=s.useRef(null),q=Ve(k,v),K=mn(t);ne(()=>(V(K),()=>{V(void 0)}),[K,V]);const[ae,Pe]=un({controlled:w,default:M,name:"NumberField",state:"value"}),W=ae??null,pe=je(W);ne(()=>{h(W!==null)},[h,W]),xn({id:K,commitValidation:R,value:W,controlRef:k});const Fe=cn(),x=je(g),F=ee(N),$=s.useRef(-1),Z=s.useRef(-1),ge=s.useRef(-1),ye=s.useRef(!1),xe=s.useRef(0),oe=s.useRef(!0),ue=s.useRef(()=>{});ne(()=>{_.initialValue===null&&W!==_.initialValue&&j(O=>({...O,initialValue:W}))},[j,_.initialValue,W]);const[ce,Se]=s.useState(()=>et(W,T,g)),[Me,Be]=s.useState("numeric"),_e=ee(()=>{const{decimal:O,group:P,currency:U}=Ke(T,g),L=Array.from(new Set([".",",",O,P]));return A==="percent"&&L.push(...dt),A==="currency"&&U&&L.push(U),E<0&&L.push("-"),L}),Y=ee(O=>O!=null&&O.altKey?u:O!=null&&O.shiftKey?f:c),le=ee((O,P,U)=>{const L=P,z=sn(O,{step:U?Y(L)*U:void 0,format:x.current,minWithDefault:E,maxWithDefault:B,minWithZeroDefault:p,snapOnStep:I,small:(L==null?void 0:L.altKey)??!1});F==null||F(z,P&&"nativeEvent"in P?P.nativeEvent:P),Pe(z),y(z!==_.initialValue),C==="onChange"&&R(z),Fe()}),X=ee((O,P,U,L)=>{const z=U??pe.current,be=typeof z=="number"?z+O*P:Math.max(0,r??0);le(be,L,P)}),J=ee(()=>{window.clearTimeout(ge.current),window.clearTimeout($.current),window.clearInterval(Z.current),ue.current(),xe.current=0}),Ne=ee((O,P)=>{if(J(),!k.current)return;const U=Ae(k.current);function L(be){be.preventDefault()}U.addEventListener("contextmenu",L),ue.current=()=>{U.removeEventListener("contextmenu",L)},U.addEventListener("pointerup",()=>{ye.current=!1,J()},{once:!0});function z(){const be=Y(P)??Re;X(be,O?1:-1,void 0,P)}z(),$.current=window.setTimeout(()=>{Z.current=window.setInterval(z,Lt)},Ot)});ne(function(){if(!oe.current)return;const P=et(W,T,x.current);P!==ce&&Se(P)}),ne(function(){if(!zt())return;let P="text";E>=0&&(P="decimal"),Be(P)},[E,A]),s.useEffect(()=>()=>J(),[J]),s.useEffect(function(){const P=k.current;if(b||a||!S||!P)return;function U(L){if(L.ctrlKey||Te(k.current).activeElement!==k.current)return;L.preventDefault();const z=Y(L)??Re;X(z,L.deltaY>0?-1:1,void 0,L)}return P.addEventListener("wheel",U),()=>{P.removeEventListener("wheel",U)}},[S,X,b,a,f,c,Y]);const Xe=rn({disabled:b,readOnly:a,value:W,inputRef:k,incrementValue:X,getStepAmount:Y});return s.useMemo(()=>({inputRef:k,mergedRef:q,inputValue:ce,value:W,startAutoChange:Ne,stopAutoChange:J,minWithDefault:E,maxWithDefault:B,disabled:b,readOnly:a,id:K,setValue:le,incrementValue:X,getStepAmount:Y,allowInputSyncRef:oe,formatOptionsRef:x,valueRef:pe,isPressedRef:ye,intentionalTouchCheckTimeoutRef:ge,movesAfterTouchRef:xe,name:n,required:l,invalid:m,inputMode:Me,getAllowedNonNumericKeys:_e,min:r,max:o,setInputValue:Se,locale:T,...Xe}),[k,q,ce,W,Xe,Ne,J,E,B,b,a,K,le,X,Y,oe,x,pe,ye,ge,xe,n,l,m,Me,_e,r,o,Se,T])}function bn(e,t){let n={};return Object.entries(e).forEach(([r,o])=>{if(t!=null&&t.hasOwnProperty(r)){const u=t[r](o);u!=null&&(n={...n,...u});return}o===!0?n[`data-${r.toLowerCase()}`]="":o&&(n[`data-${r.toLowerCase()}`]=o.toString())}),n}function vn(e,t){return typeof e=="function"?e(t):e}function Cn(e,t,n){return typeof e=="function"?e(t,n):s.cloneElement(e,{...re(t,e.props),ref:t.ref})}const Rn=parseInt(s.version,10);function En(e){return Rn>=e}function In(e,...t){let n;return typeof e!="function"?n=En(19)?e.props.ref:e.ref:n=null,Ve(n,...t)}function wn(e){return function(n){return e==="button"?i.jsx("button",{type:"button",...n}):e==="img"?i.jsx("img",{alt:"",...n}):i.jsx(e,{...n})}}const ot={};function Mn(e,t,n={}){const{className:r,render:o}=t,{propGetter:u=M=>M,state:c=ot,ref:f,props:l,customStyleHookMapping:d,styleHooks:m=!0}=n,a=o||(typeof e=="string"?wn(e):e),S=vn(r,c),I=s.useMemo(()=>m?bn(c,d):ot,[c,d,m]),g=u({...I,...Array.isArray(l)?re(...l):l});let w=[];f!==void 0&&(w=Array.isArray(f)?f:[f]);const N={...g,ref:In(a,g.ref,...w)};return S!==void 0&&(N.className=S),()=>Cn(a,N,c)}function Ie(e){const t=typeof e.render=="string"?e.render:void 0,n=typeof e.render=="string"?void 0:e.render;return{renderElement:Mn(t,{className:e.className,render:n},{...e,props:e.extraProps})}}const we={inputValue:()=>null,value:()=>null},_n=s.forwardRef(function(t,n){const{id:r,min:o,max:u,smallStep:c,step:f,largeStep:l,required:d=!1,disabled:m=!1,readOnly:a=!1,name:S,defaultValue:I,value:g,onValueChange:w,allowWheelScrub:N,snapOnStep:M,format:T,locale:V,render:C,className:y,..._}=t,j=Sn(t),{state:D,disabled:h}=Ee(),v=h||m,R=s.useMemo(()=>({...D,disabled:v,readOnly:a,required:d,value:j.value,inputValue:j.inputValue,scrubbing:j.isScrubbing}),[D,v,a,d,j.value,j.inputValue,j.isScrubbing]),b=s.useMemo(()=>({...j,state:R}),[j,R]),{renderElement:E}=Ie({ref:n,render:C??"div",state:R,className:y,extraProps:_,customStyleHookMapping:we});return i.jsx(at.Provider,{value:b,children:E()})}),Nn=s.forwardRef(function(t,n){const{render:r,className:o,...u}=t,{state:c}=ke(),f=s.useCallback((d={})=>re({role:"group"},d),[]),{renderElement:l}=Ie({propGetter:f,ref:n,render:r??"div",state:c,className:o,extraProps:u,customStyleHookMapping:we});return l()});function gt(e){const{inputRef:t,startAutoChange:n,stopAutoChange:r,minWithDefault:o,maxWithDefault:u,value:c,inputValue:f,disabled:l,readOnly:d,id:m,setValue:a,getStepAmount:S,incrementValue:I,allowInputSyncRef:g,formatOptionsRef:w,valueRef:N,movesAfterTouchRef:M,intentionalTouchCheckTimeoutRef:T,isPressedRef:V,locale:C}=e,y=s.useRef({x:0,y:0}),_=s.useRef(!1),j=s.useRef(!1),D=s.useRef(""),h=c!=null&&c<=o,v=c!=null&&c>=u,R=s.useCallback((b,E={})=>{function B(p){g.current=!0;const A=Ce(f,C,w.current);A!==null&&(N.current=A,a(A,p))}return re({disabled:l||(b?v:h),type:"button","aria-readonly":d||void 0,"aria-label":b?"Increase":"Decrease","aria-controls":m,tabIndex:-1,style:{WebkitUserSelect:"none",userSelect:"none"},onTouchStart(){_.current=!0},onTouchEnd(){_.current=!1},onClick(p){const A=l||d||(b?v:h);if(p.defaultPrevented||A||(D.current==="touch"?j.current:p.detail!==0))return;B(p.nativeEvent);const k=S(p)??Re;I(k,b?1:-1,void 0,p.nativeEvent)},onPointerDown(p){var q;const A=!p.button||p.button===0,k=l||(b?v:h);p.defaultPrevented||d||!A||k||(D.current=p.pointerType,j.current=!1,V.current=!0,y.current={x:p.clientX,y:p.clientY},B(p.nativeEvent),p.pointerType!=="touch"?(p.preventDefault(),(q=t.current)==null||q.focus(),n(b,p)):T.current=window.setTimeout(()=>{const K=M.current;M.current=0,K!=null&&K<Ht?(j.current=!0,n(b,p)):r()},Ut))},onPointerMove(p){if(l||d||(b?v:h)||p.pointerType!=="touch"||!V.current)return;M.current!=null&&(M.current+=1);const{x:k,y:q}=y.current,K=k-p.clientX,ae=q-p.clientY;K**2+ae**2>Gt**2&&r()},onMouseEnter(p){const A=l||d||(b?v:h);p.defaultPrevented||A||!V.current||_.current||n(b,p)},onMouseLeave(){_.current||r()},onMouseUp(){_.current||r()}},E)},[g,l,w,S,m,I,t,f,T,v,h,V,C,M,d,a,n,r,N]);return s.useMemo(()=>({getCommonButtonProps:R}),[R])}const Tn=s.forwardRef(function(t,n){const{render:r,className:o,disabled:u=!1,...c}=t,{state:f,inputRef:l,startAutoChange:d,stopAutoChange:m,minWithDefault:a,maxWithDefault:S,value:I,inputValue:g,disabled:w,readOnly:N,id:M,setValue:T,getStepAmount:V,incrementValue:C,allowInputSyncRef:y,formatOptionsRef:_,valueRef:j,isPressedRef:D,intentionalTouchCheckTimeoutRef:h,movesAfterTouchRef:v,locale:R}=ke(),{getCommonButtonProps:b}=gt({inputRef:l,startAutoChange:d,stopAutoChange:m,minWithDefault:a,maxWithDefault:S,value:I,inputValue:g,disabled:u||w,readOnly:N,id:M,setValue:T,getStepAmount:V,incrementValue:C,allowInputSyncRef:y,formatOptionsRef:_,valueRef:j,isPressedRef:D,intentionalTouchCheckTimeoutRef:h,movesAfterTouchRef:v,locale:R}),E=s.useCallback(p=>b(!0,p),[b]),{renderElement:B}=Ie({propGetter:E,ref:n,render:r??"button",state:f,className:o,extraProps:c,customStyleHookMapping:we});return B()}),jn=s.forwardRef(function(t,n){const{render:r,className:o,disabled:u=!1,...c}=t,{allowInputSyncRef:f,disabled:l,formatOptionsRef:d,getStepAmount:m,id:a,incrementValue:S,inputRef:I,inputValue:g,intentionalTouchCheckTimeoutRef:w,isPressedRef:N,maxWithDefault:M,minWithDefault:T,movesAfterTouchRef:V,readOnly:C,setValue:y,startAutoChange:_,state:j,stopAutoChange:D,value:h,valueRef:v,locale:R}=ke(),{getCommonButtonProps:b}=gt({inputRef:I,startAutoChange:_,stopAutoChange:D,minWithDefault:T,maxWithDefault:M,value:h,inputValue:g,disabled:u||l,readOnly:C,id:a,setValue:y,getStepAmount:m,incrementValue:S,allowInputSyncRef:f,formatOptionsRef:d,valueRef:v,isPressedRef:N,intentionalTouchCheckTimeoutRef:w,movesAfterTouchRef:V,locale:R}),E=s.useCallback(p=>b(!1,p),[b]),{renderElement:B}=Ie({propGetter:E,ref:n,render:r??"button",state:j,className:o,extraProps:c,customStyleHookMapping:we});return B()}),Dn={...hn,...we},Vn=s.forwardRef(function(t,n){const{render:r,className:o,...u}=t,{allowInputSyncRef:c,disabled:f,formatOptionsRef:l,getAllowedNonNumericKeys:d,getStepAmount:m,id:a,incrementValue:S,inputMode:I,inputValue:g,invalid:w,max:N,mergedRef:M,min:T,name:V,readOnly:C,required:y,setValue:_,state:j,valueRef:D,setInputValue:h,locale:v}=ke(),{labelId:R,validationMode:b,setTouched:E,setFocused:B}=Ee(),{getInputValidationProps:p,getValidationProps:A,commitValidation:k,inputRef:q}=pt(),K=s.useRef(!1),ae=Ve(n,q,M),Pe=s.useCallback((Fe={})=>re({id:a,required:y,name:V,disabled:f,readOnly:C,inputMode:I,value:g,ref:ae,type:"text",autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-roledescription":"Number field","aria-invalid":w||void 0,"aria-labelledby":R,suppressHydrationWarning:!0,onFocus(x){if(x.defaultPrevented||C||f||K.current)return;K.current=!0,B(!0);const F=x.currentTarget,$=F.value.length;F.setSelectionRange($,$)},onBlur(x){if(x.defaultPrevented||C||f)return;if(E(!0),B(!1),b==="onBlur"&&k(D.current),c.current=!0,g.trim()===""){_(null);return}const F=Ce(g,v,l.current);F!==null&&_(F,x.nativeEvent)},onChange(x){if(x.nativeEvent.defaultPrevented)return;c.current=!1;const F=x.target.value;if(F.trim()===""){h(F),_(null,x.nativeEvent);return}if(x.isTrusted){h(F);return}const $=Ce(F,v,l.current);$!==null&&(h(F),_($,x.nativeEvent))},onKeyDown(x){if(x.defaultPrevented||C||f)return;const F=x.nativeEvent;c.current=!0;const $=d();let Z=$.includes(x.key);const{decimal:ge,currency:ye,percentSign:xe}=Ke([],l.current),oe=x.currentTarget.selectionStart,ue=x.currentTarget.selectionEnd,ce=oe===0&&ue===g.length;if(x.key==="-"&&$.includes("-")){const X=oe===0&&ue===1&&g[0]==="-";Z=!g.includes("-")||ce||X}[ge,ye,xe].forEach(X=>{if(x.key===X){const J=g.indexOf(X),Ne=oe===J&&ue===J+1;Z=!g.includes(X)||ce||Ne}});const Se=/^[0-9]$/.test(x.key),Me=We.test(x.key),Be=$e.test(x.key),_e=["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter"].includes(x.key);if(x.which===229||x.altKey||x.ctrlKey||x.metaKey||Z||Se||Me||Be||_e)return;const Y=Ce(g,v,l.current),le=m(x)??Re;x.preventDefault(),x.key==="ArrowUp"?S(le,1,Y,F):x.key==="ArrowDown"?S(le,-1,Y,F):x.key==="Home"&&T!=null?_(T,F):x.key==="End"&&N!=null&&_(N,F)},onPaste(x){if(x.defaultPrevented||C||f)return;x.preventDefault();const $=(x.clipboardData||window.Clipboard).getData("text/plain"),Z=Ce($,v,l.current);Z!==null&&(c.current=!1,_(Z,x.nativeEvent),h($))}},p(A(Fe))),[p,A,a,y,V,f,C,I,g,w,R,B,E,b,l,k,D,_,d,m,T,N,S,h,c,v,ae]),W=Ve(n,M),{renderElement:pe}=Ie({propGetter:Pe,ref:W,render:r??"input",className:o,state:j,extraProps:u,customStyleHookMapping:Dn});return pe()}),kn="_Container_enatx_1",An="_Field_enatx_6",Pn="_Group_enatx_23",Fn="_Input_enatx_28",Bn="_Decrement_enatx_53",Ln="_Increment_enatx_54",de={Container:kn,Field:An,Group:Pn,Input:Fn,Decrement:Bn,Increment:Ln},st=({value:e,onChange:t,defaultValue:n=0,min:r,max:o,id:u,label:c})=>{const f=s.useId(),l=u||f,d=m=>{if(m===null)return;let a=m;r!==void 0&&(a=Math.max(a,r)),o!==void 0&&(a=Math.min(a,o)),t(a)};return i.jsxs("div",{className:de.Container,children:[c&&i.jsx("label",{htmlFor:l,children:c}),i.jsx(_n,{id:l,value:e,defaultValue:n,className:de.Field,children:i.jsxs(Nn,{className:de.Group,children:[i.jsx(jn,{className:de.Decrement,onClick:()=>d((e??0)-1),children:i.jsx(wt,{})}),i.jsx(Vn,{className:de.Input,value:e??"",onChange:m=>d(Number(m.target.value)||0)}),i.jsx(Tn,{className:de.Increment,onClick:()=>d((e??0)+1),children:i.jsx(Mt,{})})]})})]})},On=({value:e,onChange:t,defaultValue:n,id:r,label:o,sx:u})=>{const c=s.useId(),f=r||c;return i.jsx(xt,{variant:"outlined",label:o,value:e,onChange:l=>t(l.target.value),defaultValue:n,id:f,sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderWidth:"1px"},"&.Mui-focused fieldset":{borderWidth:"1px",borderColor:"secondary.main"}},...u}})};async function Un(e,t){const n=e.filter((r,o)=>o%2===0).join("/");if(e.length%2===0){const r=jt(Le,...e);return(await Dt(r)).exists()?(await Vt(r),t==null||t({collectionPath:n,deleted:1,total:1}),1):0}else{const r=kt(Le,...e);let o=0;try{o=(await At(r)).data().count}catch(f){console.warn(`Could not count documents in: ${n}`,f)}let u,c=0;for(;;){const f=u?Ye(r,Ze(ze.MAX_BATCH_SIZE),Bt(u)):Ye(r,Ze(ze.MAX_BATCH_SIZE)),d=(await Pt(f)).docs;if(d.length===0)break;const m=Ft(Le);d.forEach(a=>m.delete(a.ref)),await m.commit(),c+=d.length,u=d[d.length-1],t==null||t({collectionPath:n,deleted:c,total:o})}return c}}async function Hn(e,t){const n=[[se.USER_STATS,e,se.DAILY_SESSIONS],[se.USER_STATS,e,se.SESSION_GAPS],[se.USER_SESSIONS,e,se.SESSIONS],[se.USER_SETTINGS,e]];for(const r of n)await Un(r,t)}const Gn="_MaterialIcon_erlzd_10",ie={MaterialIcon:Gn},Wn="_ModalBackdrop_1v2wn_1",$n="_ConfirmBackdrop_1v2wn_2",Kn="_Modal_1v2wn_1",Xn="_ConfirmBox_1v2wn_13",zn="_Button_1v2wn_32",ve={ModalBackdrop:Wn,ConfirmBackdrop:$n,Modal:Kn,ConfirmBox:Xn,Button:zn};function qn({userId:e}){const[t,n]=s.useState(!1),[r,o]=s.useState(!1),[u,c]=s.useState(null),[f,l]=s.useState(!1),d=()=>{n(!0)},m=()=>{n(!1)},a=async()=>{e&&(n(!1),o(!0),await Hn(e,I=>{c(I)}),c(null),l(!0))},S=async()=>{o(!1),l(!1),await it()};return i.jsxs(i.Fragment,{children:[i.jsx(fe,{sx:{bgcolor:me.palette.error.main},variant:"outlined",onClick:d,fullWidth:!0,children:i.jsxs(G,{className:ve.Button,children:[i.jsx(St,{fontSize:"small",className:ie.MaterialIcon}),i.jsx("span",{children:" Delete My Data"})]})}),i.jsx(qe,{children:r&&i.jsx(he.div,{className:ve.ModalBackdrop,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:i.jsx(he.div,{className:ve.Modal,initial:{opacity:0,y:30,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.95},transition:{duration:.3},children:f?i.jsxs(i.Fragment,{children:[i.jsx(bt,{className:ie.MaterialIcon,fontSize:"large",sx:{color:me.palette.success.main}}),i.jsx(te,{variant:"h5",mb:2,children:"Deletion Complete"}),i.jsx(fe,{variant:"contained",color:"success",onClick:S,children:"OK"})]}):i.jsxs(i.Fragment,{children:[i.jsx(te,{variant:"h5",mb:2,children:"Deleting Your Data"}),i.jsx(te,{variant:"body1",mb:2,sx:{wordBreak:"break-word",overflowWrap:"break-word",maxWidth:"100%"},children:u?`${u.deleted} / ${u.total} deleted from ${u.collectionPath}`:"Starting"})]})})})}),i.jsx(qe,{children:t&&i.jsx(he.div,{className:ve.ConfirmBackdrop,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:i.jsxs(he.div,{className:ve.ConfirmBox,initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:30},transition:{duration:.3},children:[i.jsxs(G,{sx:{display:"flex",gap:1,alignItems:"center",justifyContent:"center",mb:2},children:[i.jsx(vt,{className:ie.MaterialIcon,fontSize:"large",sx:{color:me.palette.warning.main}}),i.jsx(te,{variant:"h5",children:"Are you sure you want to delete all your data?"})]}),i.jsxs(G,{sx:{flexGrow:1,display:"flex",gap:5,justifyContent:"space-evenly"},children:[i.jsx(fe,{sx:{bgcolor:me.palette.error.main},onClick:a,children:i.jsx(te,{variant:"body1",children:"Yes"})}),i.jsx(fe,{onClick:m,children:i.jsx(te,{variant:"body1",children:"Cancel"})})]})]})})})]})}const Yn="_LoadingContainer_1hf4k_1",Zn="_SettingsContainer_1hf4k_9",Jn="_SettingsContent_1hf4k_16",Qn="_SettingsSection_1hf4k_26",er="_SectionHeader_1hf4k_38",tr="_SettingsItem_1hf4k_44",nr="_ButtonContainer_1hf4k_52",rr="_Button_1hf4k_52",H={LoadingContainer:Yn,SettingsContainer:Zn,SettingsContent:Jn,SettingsSection:Qn,SectionHeader:er,SettingsItem:tr,ButtonContainer:nr,Button:rr},or={hidden:{opacity:0,x:-20},visible:e=>({opacity:1,x:0,transition:{delay:e*.1,duration:.4,ease:"easeOut"}})},He=({children:e,index:t,className:n})=>i.jsx(he.div,{className:n,variants:or,initial:"hidden",animate:"visible",custom:t,children:e});function lr(){const n=Oe(y=>y.settings),r=Oe(y=>y.updateTargetDuration),o=_t(y=>y.user),u=Oe(y=>y.updateName),c=()=>n?Math.floor(n.targetDuration/3600):0,f=()=>n?Math.floor(n.targetDuration/60%60):0,[l,d]=s.useState(c()),[m,a]=s.useState(f()),[S,I]=s.useState((n==null?void 0:n.name)||""),[g,w]=s.useState(!1);s.useEffect(()=>{if(n!==null){const y=n.targetDuration;d(Math.floor(y/3600)),a(Math.floor(y%3600/60)),I(n.name),w(!1)}},[n]);const N=y=>{y!==null&&(d(Math.min(y,744)),w(!0))},M=y=>{y!==null&&(a(Math.min(y,59)),w(!0))},T=y=>{y!==null&&(I(y),w(!0))},V=async()=>{C();try{await Tt(),w(!1)}catch(y){console.error("Error saving user settings:",y)}},C=()=>{const y=l*3600+m*60;r(y),u(S)};return n?i.jsxs(G,{className:H.SettingsContainer,children:[i.jsxs(G,{className:H.SettingsContent,children:[i.jsxs(He,{index:0,className:H.SettingsSection,children:[i.jsxs(G,{className:H.SectionHeader,children:[i.jsx(Ct,{className:ie.MaterialIcon,fontSize:"medium"}),i.jsx(te,{variant:"h3",children:"Timer"})]}),i.jsxs(G,{className:H.SettingsItem,children:[i.jsx("label",{children:"Hours"}),i.jsx(st,{value:l,onChange:N,min:0,max:744})]}),i.jsxs(G,{className:H.SettingsItem,children:[i.jsx("label",{children:"Minutes"}),i.jsx(st,{value:m,onChange:M,min:0,max:59})]})]}),i.jsxs(He,{index:1,className:H.SettingsSection,children:[i.jsxs(G,{className:H.SectionHeader,children:[i.jsx(Rt,{className:ie.MaterialIcon,fontSize:"medium"}),i.jsx(te,{variant:"h3",children:"Account"})]}),i.jsxs(G,{className:H.SettingsItem,children:[i.jsx("label",{children:"Email"}),i.jsx(te,{sx:{color:me.palette.grey[400]},children:n.email})]}),i.jsxs(G,{className:H.SettingsItem,children:[i.jsx("label",{children:"Name"}),i.jsx(On,{value:S,onChange:T})]})]}),i.jsx(He,{index:2,children:i.jsxs(G,{className:H.SettingsSection,children:[i.jsx(qn,{userId:o==null?void 0:o.uid}),i.jsx(fe,{sx:{bgcolor:me.palette.error.main},variant:"contained",onClick:it,fullWidth:!0,children:i.jsxs(G,{className:H.Button,children:[i.jsx(Et,{fontSize:"small",className:ie.MaterialIcon}),i.jsx("span",{children:" Sign Out"})]})})]})})]}),i.jsx(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.4},className:H.ButtonContainer,children:i.jsx(fe,{variant:"contained",color:"primary",disabled:!g,onClick:V,fullWidth:!0,children:i.jsxs(G,{className:H.Button,children:[i.jsx(It,{fontSize:"small",className:ie.MaterialIcon}),i.jsx("span",{children:"Save"})]})})})]}):i.jsx(G,{className:H.LoadingContainer,children:i.jsx(Nt,{})})}export{lr as default};
