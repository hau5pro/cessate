import{r as s,n as Ue,o as pt,j as a,p as gt,B as U,q as St,e as re,s as xt,W as yt,S as bt,t as vt,A as Ct,L as Rt,u as Et}from"./mui-VNDw4GbL.js";import{B as fe}from"./BaseButton-BAn9bG3A.js";import{M as It,P as wt}from"./CustomIcons-C5qBGpgL.js";import{D as le,g as Mt,e as Ke,t as me,f as rt,b as Le,a as Nt,L as _t,h as Tt}from"./index-DthfRJtD.js";import{m as jt,q as Xe,l as ze,j as Vt,w as Dt,n as kt}from"./firebase-D7NFCWFF.js";import{g as te}from"./GlobalStyles.module-B3PpPBog.js";import{m as ot}from"./proxy-T6__QUVo.js";const st=s.createContext(void 0);function ke(){const e=s.useContext(st);if(e===void 0)throw new Error("Base UI: NumberFieldRootContext is missing. NumberField parts must be placed within <NumberField.Root>.");return e}const At=60,Pt=400,Ft=50,Bt=3,Lt=8,Ce=1;function Te(e){return e&&e.ownerDocument||document}function Ae(e){return Te(e).defaultView||window}function Ot(e,t){const n=Ae(t),r=t.getBoundingClientRect();if(r&&e!=null)return{x:r.left-e/2,y:r.top-e/2,width:r.right+e/2,height:r.bottom+e/2};const o=n.visualViewport;return o?{x:o.offsetLeft,y:o.offsetTop,width:o.offsetLeft+o.width,height:o.offsetTop+o.height}:{x:0,y:0,width:n.document.documentElement.clientWidth,height:n.document.documentElement.clientHeight}}function Ut(e,t){const n=Ae(e).visualViewport;if(!n)return()=>{};function r(){n&&(t.current=n.scale)}return r(),n.addEventListener("resize",r),()=>{n.removeEventListener("resize",r)}}const ne=typeof window<"u"?s.useLayoutEffect:s.useEffect;function je(e){const t=s.useRef(e);return ne(()=>{t.current=e}),t}function Ht(){if(typeof navigator>"u")return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e!=null&&e.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints}}function Gt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none")}function Wt(){const e=Ht();return e.platform==="MacIntel"&&e.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(e.platform)}function oe(...e){if(e.length===0)return{};if(e.length===1)return qe(e[0],{});let t=qe(e[0],{});for(let n=1;n<e.length;n+=1){const r=e[n];r&&(at(r)?t=r(t):t=$t(t,r))}return t??{}}function qe(e,t){return at(e)?e(t):e??{}}function $t(e,t){return t?e?Object.entries(t).reduce((n,[r,o])=>(Kt(r,o)?n[r]=Xt(e[r],o):r==="style"?n[r]=qt(e.style,o):r==="className"?n[r]=Yt(e.className,o):n[r]=o,n),{...e}):t:e||{}}function Kt(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function at(e){return typeof e=="function"}function Xt(e,t){return n=>{if(Zt(n)){const o=n;zt(o);const c=t(o);return o.baseUIHandlerPrevented||e==null||e(o),c}const r=t(n);return e==null||e(n),r}}function zt(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function qt(e,t){if(t||e)return{...e,...t}}function Yt(e,t){return t?e?t+" "+e:t:e}function Zt(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}let Jt=function(e){return e.scrubbing="data-scrubbing",e.disabled="data-disabled",e.readonly="data-readonly",e.required="data-required",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});function ee(e){const t=s.useRef(e);return ne(()=>{t.current=e}),s.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Qt(e){const{disabled:t,readOnly:n,value:r,inputRef:o,incrementValue:c,getStepAmount:l}=e,f=je(r),u=s.useRef(null),m=s.useRef(null),d=s.useRef(!1),i=s.useRef(null),g=s.useRef({x:0,y:0}),I=s.useRef(1),[S,w]=s.useState(!1),[_,M]=s.useState(!1),[T,D]=s.useState(!1);s.useEffect(()=>{if(!(!S||!i.current))return Ut(i.current,I)},[S]);const C=ee((V,h)=>{i.current&&(i.current.style.transform=`translate3d(${V}px,${h}px,0) scale(${1/I.current})`)}),x=s.useCallback(({movementX:V,movementY:h})=>{const v=i.current,R=m.current,b=u.current;if(!v||!R||!b)return;const E=Ot(b.teleportDistance,R),B=g.current,p={x:Math.round(B.x+V),y:Math.round(B.y+h)},A=v.offsetWidth,k=v.offsetHeight;p.x+A/2<E.x?p.x=E.width-A/2:p.x+A/2>E.width&&(p.x=E.x-A/2),p.y+k/2<E.y?p.y=E.height-k/2:p.y+k/2>E.height&&(p.y=E.y-k/2),g.current=p,C(p.x,p.y)},[C]),N=s.useCallback((V,{clientX:h,clientY:v})=>{Ue.flushSync(()=>{w(V)});const R=i.current;if(!R||!V)return;const b={x:h-R.offsetWidth/2,y:v-R.offsetHeight/2};g.current=b,C(b.x,b.y)},[C]),j=s.useCallback((V={})=>oe({role:"presentation",[Jt.scrubbing]:S||void 0,style:{touchAction:"none",WebkitUserSelect:"none",userSelect:"none"},async onPointerDown(h){var b;const v=!h.button||h.button===0;if(h.defaultPrevented||n||!v||t)return;const R=h.pointerType==="touch";if(M(R),h.pointerType==="mouse"&&(h.preventDefault(),(b=o.current)==null||b.focus()),d.current=!0,N(!0,h.nativeEvent),!R&&!Gt())try{await Te(m.current).body.requestPointerLock(),D(!1)}catch{D(!0)}finally{Ue.flushSync(()=>{N(!0,h.nativeEvent)})}}},V),[n,t,N,o,S]);return s.useEffect(function(){if(!o.current||t||n)return;let h=0;function v(E){try{Te(m.current).exitPointerLock()}catch{}finally{d.current=!1,N(!1,E)}}function R(E){if(!d.current||!u.current)return;E.preventDefault(),x(E);const{direction:B,pixelSensitivity:p}=u.current,{movementX:A,movementY:k}=E;if(h+=B==="vertical"?k:A,Math.abs(h)>=p){h=0;const q=B==="vertical"?-k:A;c(q*(l(E)??Ce),1)}}const b=Ae(o.current);return b.addEventListener("pointerup",v,!0),b.addEventListener("pointermove",R,!0),()=>{b.removeEventListener("pointerup",v,!0),b.removeEventListener("pointermove",R,!0)}},[t,n,c,f,l,o,N,x]),s.useEffect(function(){const h=m.current;if(!h||t||n)return;function v(R){R.touches.length===1&&R.preventDefault()}return h.addEventListener("touchstart",v),()=>{h.removeEventListener("touchstart",v)}},[t,n]),s.useMemo(()=>({isScrubbing:S,isTouchInput:_,isPointerLockDenied:T,getScrubAreaProps:j,scrubAreaCursorRef:i,scrubAreaRef:m,scrubHandleRef:u}),[S,_,T,j])}const Ye=new Map;function Ve(e,t){const n=JSON.stringify({locale:e,options:t}),r=Ye.get(n);if(r)return r;const o=new Intl.NumberFormat(e,t);return Ye.set(n,o),o}function Ze(e,t,n){return e==null?"":Ve(t,n).format(e)}function en(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function Oe(e,t={}){return parseFloat(Ve("en-US",{maximumFractionDigits:t.maximumFractionDigits,minimumFractionDigits:t.minimumFractionDigits,useGrouping:!1}).format(e))}function tn(e,{step:t,minWithDefault:n,maxWithDefault:r,minWithZeroDefault:o,format:c,snapOnStep:l,small:f}){if(e===null)return e;const u=en(e,n,r);if(t!=null&&l){if(f){const d=(u-o)/t,i=Math.round(d),g=o+i*t;return Oe(g,c)}const m=n!==Number.MIN_SAFE_INTEGER?n:o;if(t>0){const d=u-t,i=Math.floor((d-m)/t);return Oe(m+i*t+t,c)}if(t<0){const d=Math.abs(t),i=u-t,g=Math.ceil((i-m)/d);return Oe(m+g*d+t,c)}}return u}const it=["零","一","二","三","四","五","六","七","八","九"],ut=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"],ct=["%","٪"],He=new RegExp(`[${ut.join("")}]`,"g"),Ge=new RegExp(`[${it.join("")}]`,"g"),nn=new RegExp(`[${ct.join("")}]`);function We(e,t){const n=Ve(e,t).formatToParts(11111.1),r={};return n.forEach(o=>{r[o.type]=o.value}),Ve(e).formatToParts(.1).forEach(o=>{o.type==="decimal"&&(r[o.type]=o.value)}),r}function ve(e,t,n){let r=t;r===void 0&&(He.test(e)?r="ar":Ge.test(e)&&(r="zh"));const{group:o,decimal:c,currency:l,unit:f}=We(r,n);let u=null;o&&(u=new RegExp("\\p{Zs}","u").test(o)?new RegExp("\\p{Zs}","gu"):new RegExp(`\\${o}`,"g"));const d=[{regex:o?u:null,replacement:""},{regex:c?new RegExp(`\\${c}`,"g"):null,replacement:"."},{regex:l?new RegExp(`\\${l}`,"g"):null,replacement:""},{regex:f?new RegExp(`\\${f}`,"g"):null,replacement:""},{regex:He,replacement:w=>ut.indexOf(w).toString()},{regex:Ge,replacement:w=>it.indexOf(w).toString()}].reduce((w,{regex:_,replacement:M})=>_?w.replace(_,M):w,e);let i=parseFloat(d);const g=n==null?void 0:n.style,I=g==="unit"&&(n==null?void 0:n.unit)==="percent",S=nn.test(e)||g==="percent";return!I&&S&&(i/=100),Number.isNaN(i)?null:i}function rn({controlled:e,default:t,name:n,state:r="value"}){const{current:o}=s.useRef(e!==void 0),[c,l]=s.useState(t),f=o?e:c,u=s.useCallback(m=>{o||l(m)},[]);return[f,u]}function on(){const[,e]=s.useState({});return s.useCallback(()=>{e({})},[])}let Je=0;function sn(e,t="mui"){const[n,r]=s.useState(e),o=e||n;return s.useEffect(()=>{n==null&&(Je+=1,r(`${t}-${Je}`))},[n,t]),o}const an={...pt},Qe=an.useId;function un(e,t){if(Qe!==void 0){const n=Qe();return e??`${t}-${n}`}return sn(e,t)}function cn(e){return un(e,"base-ui")}let et=function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});const lt={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},ln={valid(e){return e===null?null:e?{[et.valid]:""}:{[et.invalid]:""}}},Q=()=>{},dn=s.createContext({invalid:void 0,controlId:void 0,setControlId:Q,labelId:void 0,setLabelId:Q,messageIds:[],setMessageIds:Q,name:void 0,validityData:{state:lt,errors:[],error:"",value:"",initialValue:null},setValidityData:Q,disabled:void 0,touched:!1,setTouched:Q,dirty:!1,setDirty:Q,filled:!1,setFilled:Q,focused:!1,setFocused:Q,validate:()=>null,validationMode:"onBlur",validationDebounceTime:0,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1}});function Re(e=!0){const t=s.useContext(dn);if(t.setControlId===Q&&!e)throw new Error("Base UI: FieldRootContext is missing. Field parts must be placed within <Field.Root>.");return t}const fn=s.createContext({formRef:{current:{fields:new Map}},errors:{},onClearErrors:()=>{}});function dt(){return s.useContext(fn)}function ft(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}const mn=Object.keys(lt);function mt(){const{setValidityData:e,validate:t,messageIds:n,validityData:r,validationMode:o,validationDebounceTime:c,invalid:l,markedDirtyRef:f,controlId:u,state:m}=Re(),{formRef:d}=dt(),i=s.useRef(-1),g=s.useRef(null);s.useEffect(()=>()=>{window.clearTimeout(i.current)},[]);const I=ee(async _=>{const M=g.current;if(!M)return;function T(h){return mn.reduce((v,R)=>(v[R]=h.validity[R],!h.validity.customError&&!f.current&&(v[R]=R==="valid"),v),{})}window.clearTimeout(i.current);const D=t(_);let C=null;typeof D=="object"&&D!==null&&"then"in D?C=await D:C=D;let x="";C!==null&&(x=Array.isArray(C)?C.join(`
`):C),M.setCustomValidity(x);const N=T(M);let j=[];Array.isArray(C)?j=C:C?j=[C]:M.validationMessage&&(j=[M.validationMessage]);const V={value:_,state:N,error:Array.isArray(C)?C[0]:C??M.validationMessage,errors:j,initialValue:r.initialValue};if(u){const h=d.current.fields.get(u);h&&d.current.fields.set(u,{...h,...ft(V,l)})}e(V)}),S=s.useCallback((_={})=>oe({...n.length&&{"aria-describedby":n.join(" ")},...m.valid===!1&&{"aria-invalid":!0}},_),[n,m.valid]),w=s.useCallback((_={})=>oe({onChange(M){if(M.nativeEvent.defaultPrevented||l||o!=="onChange")return;const T=M.currentTarget;if(T.value===""){I(T.value);return}window.clearTimeout(i.current),c?i.current=window.setTimeout(()=>{I(T.value)},c):I(T.value)}},S(_)),[S,l,o,c,I]);return s.useMemo(()=>({getValidationProps:S,getInputValidationProps:w,inputRef:g,commitValidation:I}),[S,w,I])}function De(...e){const t=s.useRef(void 0),n=s.useCallback(r=>{const o=e.map(c=>{if(c==null)return null;if(typeof c=="function"){const l=c,f=l(r);return typeof f=="function"?f:()=>{l(null)}}return c.current=r,()=>{c.current=null}});return()=>{o.forEach(c=>c==null?void 0:c())}},e);return s.useMemo(()=>e.every(r=>r==null)?null:r=>{t.current&&(t.current(),t.current=void 0),r!=null&&(t.current=n(r))},e)}function hn(e){const{formRef:t}=dt(),{invalid:n,markedDirtyRef:r,validityData:o,setValidityData:c}=Re(),{value:l,id:f,controlRef:u,commitValidation:m}=e,d=je(e.getValue);ne(()=>{var g;let i=l;i===void 0&&(i=(g=d.current)==null?void 0:g.call(d)),o.initialValue===null&&i!==o.initialValue&&c(I=>({...I,initialValue:i}))},[c,l,o.initialValue,d]),ne(()=>{f&&t.current.fields.set(f,{controlRef:u,validityData:ft(o,n),validate(){var g;let i=l;i===void 0&&(i=(g=d.current)==null?void 0:g.call(d)),r.current=!0,Ue.flushSync(()=>m(i))}})},[m,u,t,d,f,n,r,o,l])}function pn(e){const{id:t,name:n,min:r,max:o,smallStep:c=.1,step:l=1,largeStep:f=10,required:u=!1,disabled:m=!1,invalid:d=!1,readOnly:i=!1,allowWheelScrub:g=!1,snapOnStep:I=!1,format:S,value:w,onValueChange:_,defaultValue:M,locale:T}=e,{setControlId:D,validationMode:C,setDirty:x,validityData:N,setValidityData:j,disabled:V,setFilled:h}=Re(),{inputRef:v,commitValidation:R}=mt(),b=V||m,E=r??Number.MIN_SAFE_INTEGER,B=o??Number.MAX_SAFE_INTEGER,p=r??0,A=S==null?void 0:S.style,k=s.useRef(null),q=De(k,v),K=cn(t);ne(()=>(D(K),()=>{D(void 0)}),[K,D]);const[ae,Pe]=rn({controlled:w,default:M,name:"NumberField",state:"value"}),W=ae??null,he=je(W);ne(()=>{h(W!==null)},[h,W]),hn({id:K,commitValidation:R,value:W,controlRef:k});const Fe=on(),y=je(S),F=ee(_),$=s.useRef(-1),Z=s.useRef(-1),pe=s.useRef(-1),ge=s.useRef(!1),Se=s.useRef(0),se=s.useRef(!0),ie=s.useRef(()=>{});ne(()=>{N.initialValue===null&&W!==N.initialValue&&j(O=>({...O,initialValue:W}))},[j,N.initialValue,W]);const[ue,xe]=s.useState(()=>Ze(W,T,S)),[we,Be]=s.useState("numeric"),Me=ee(()=>{const{decimal:O,group:P,currency:H}=We(T,S),L=Array.from(new Set([".",",",O,P]));return A==="percent"&&L.push(...ct),A==="currency"&&H&&L.push(H),E<0&&L.push("-"),L}),Y=ee(O=>O!=null&&O.altKey?c:O!=null&&O.shiftKey?f:l),ce=ee((O,P,H)=>{const L=P,z=tn(O,{step:H?Y(L)*H:void 0,format:y.current,minWithDefault:E,maxWithDefault:B,minWithZeroDefault:p,snapOnStep:I,small:(L==null?void 0:L.altKey)??!1});F==null||F(z,P&&"nativeEvent"in P?P.nativeEvent:P),Pe(z),x(z!==N.initialValue),C==="onChange"&&R(z),Fe()}),X=ee((O,P,H,L)=>{const z=H??he.current,ye=typeof z=="number"?z+O*P:Math.max(0,r??0);ce(ye,L,P)}),J=ee(()=>{window.clearTimeout(pe.current),window.clearTimeout($.current),window.clearInterval(Z.current),ie.current(),Se.current=0}),Ne=ee((O,P)=>{if(J(),!k.current)return;const H=Ae(k.current);function L(ye){ye.preventDefault()}H.addEventListener("contextmenu",L),ie.current=()=>{H.removeEventListener("contextmenu",L)},H.addEventListener("pointerup",()=>{ge.current=!1,J()},{once:!0});function z(){const ye=Y(P)??Ce;X(ye,O?1:-1,void 0,P)}z(),$.current=window.setTimeout(()=>{Z.current=window.setInterval(z,At)},Pt)});ne(function(){if(!se.current)return;const P=Ze(W,T,y.current);P!==ue&&xe(P)}),ne(function(){if(!Wt())return;let P="text";E>=0&&(P="decimal"),Be(P)},[E,A]),s.useEffect(()=>()=>J(),[J]),s.useEffect(function(){const P=k.current;if(b||i||!g||!P)return;function H(L){if(L.ctrlKey||Te(k.current).activeElement!==k.current)return;L.preventDefault();const z=Y(L)??Ce;X(z,L.deltaY>0?-1:1,void 0,L)}return P.addEventListener("wheel",H),()=>{P.removeEventListener("wheel",H)}},[g,X,b,i,f,l,Y]);const $e=Qt({disabled:b,readOnly:i,value:W,inputRef:k,incrementValue:X,getStepAmount:Y});return s.useMemo(()=>({inputRef:k,mergedRef:q,inputValue:ue,value:W,startAutoChange:Ne,stopAutoChange:J,minWithDefault:E,maxWithDefault:B,disabled:b,readOnly:i,id:K,setValue:ce,incrementValue:X,getStepAmount:Y,allowInputSyncRef:se,formatOptionsRef:y,valueRef:he,isPressedRef:ge,intentionalTouchCheckTimeoutRef:pe,movesAfterTouchRef:Se,name:n,required:u,invalid:d,inputMode:we,getAllowedNonNumericKeys:Me,min:r,max:o,setInputValue:xe,locale:T,...$e}),[k,q,ue,W,$e,Ne,J,E,B,b,i,K,ce,X,Y,se,y,he,ge,pe,Se,n,u,d,we,Me,r,o,xe,T])}function gn(e,t){let n={};return Object.entries(e).forEach(([r,o])=>{if(t!=null&&t.hasOwnProperty(r)){const c=t[r](o);c!=null&&(n={...n,...c});return}o===!0?n[`data-${r.toLowerCase()}`]="":o&&(n[`data-${r.toLowerCase()}`]=o.toString())}),n}function Sn(e,t){return typeof e=="function"?e(t):e}function xn(e,t,n){return typeof e=="function"?e(t,n):s.cloneElement(e,{...oe(t,e.props),ref:t.ref})}const yn=parseInt(s.version,10);function bn(e){return yn>=e}function vn(e,...t){let n;return typeof e!="function"?n=bn(19)?e.props.ref:e.ref:n=null,De(n,...t)}function Cn(e){return function(n){return e==="button"?a.jsx("button",{type:"button",...n}):e==="img"?a.jsx("img",{alt:"",...n}):a.jsx(e,{...n})}}const tt={};function Rn(e,t,n={}){const{className:r,render:o}=t,{propGetter:c=M=>M,state:l=tt,ref:f,props:u,customStyleHookMapping:m,styleHooks:d=!0}=n,i=o||(typeof e=="string"?Cn(e):e),g=Sn(r,l),I=s.useMemo(()=>d?gn(l,m):tt,[l,m,d]),S=c({...I,...Array.isArray(u)?oe(...u):u});let w=[];f!==void 0&&(w=Array.isArray(f)?f:[f]);const _={...S,ref:vn(i,S.ref,...w)};return g!==void 0&&(_.className=g),()=>xn(i,_,l)}function Ee(e){const t=typeof e.render=="string"?e.render:void 0,n=typeof e.render=="string"?void 0:e.render;return{renderElement:Rn(t,{className:e.className,render:n},{...e,props:e.extraProps})}}const Ie={inputValue:()=>null,value:()=>null},En=s.forwardRef(function(t,n){const{id:r,min:o,max:c,smallStep:l,step:f,largeStep:u,required:m=!1,disabled:d=!1,readOnly:i=!1,name:g,defaultValue:I,value:S,onValueChange:w,allowWheelScrub:_,snapOnStep:M,format:T,locale:D,render:C,className:x,...N}=t,j=pn(t),{state:V,disabled:h}=Re(),v=h||d,R=s.useMemo(()=>({...V,disabled:v,readOnly:i,required:m,value:j.value,inputValue:j.inputValue,scrubbing:j.isScrubbing}),[V,v,i,m,j.value,j.inputValue,j.isScrubbing]),b=s.useMemo(()=>({...j,state:R}),[j,R]),{renderElement:E}=Ee({ref:n,render:C??"div",state:R,className:x,extraProps:N,customStyleHookMapping:Ie});return a.jsx(st.Provider,{value:b,children:E()})}),In=s.forwardRef(function(t,n){const{render:r,className:o,...c}=t,{state:l}=ke(),f=s.useCallback((m={})=>oe({role:"group"},m),[]),{renderElement:u}=Ee({propGetter:f,ref:n,render:r??"div",state:l,className:o,extraProps:c,customStyleHookMapping:Ie});return u()});function ht(e){const{inputRef:t,startAutoChange:n,stopAutoChange:r,minWithDefault:o,maxWithDefault:c,value:l,inputValue:f,disabled:u,readOnly:m,id:d,setValue:i,getStepAmount:g,incrementValue:I,allowInputSyncRef:S,formatOptionsRef:w,valueRef:_,movesAfterTouchRef:M,intentionalTouchCheckTimeoutRef:T,isPressedRef:D,locale:C}=e,x=s.useRef({x:0,y:0}),N=s.useRef(!1),j=s.useRef(!1),V=s.useRef(""),h=l!=null&&l<=o,v=l!=null&&l>=c,R=s.useCallback((b,E={})=>{function B(p){S.current=!0;const A=ve(f,C,w.current);A!==null&&(_.current=A,i(A,p))}return oe({disabled:u||(b?v:h),type:"button","aria-readonly":m||void 0,"aria-label":b?"Increase":"Decrease","aria-controls":d,tabIndex:-1,style:{WebkitUserSelect:"none",userSelect:"none"},onTouchStart(){N.current=!0},onTouchEnd(){N.current=!1},onClick(p){const A=u||m||(b?v:h);if(p.defaultPrevented||A||(V.current==="touch"?j.current:p.detail!==0))return;B(p.nativeEvent);const k=g(p)??Ce;I(k,b?1:-1,void 0,p.nativeEvent)},onPointerDown(p){var q;const A=!p.button||p.button===0,k=u||(b?v:h);p.defaultPrevented||m||!A||k||(V.current=p.pointerType,j.current=!1,D.current=!0,x.current={x:p.clientX,y:p.clientY},B(p.nativeEvent),p.pointerType!=="touch"?(p.preventDefault(),(q=t.current)==null||q.focus(),n(b,p)):T.current=window.setTimeout(()=>{const K=M.current;M.current=0,K!=null&&K<Bt?(j.current=!0,n(b,p)):r()},Ft))},onPointerMove(p){if(u||m||(b?v:h)||p.pointerType!=="touch"||!D.current)return;M.current!=null&&(M.current+=1);const{x:k,y:q}=x.current,K=k-p.clientX,ae=q-p.clientY;K**2+ae**2>Lt**2&&r()},onMouseEnter(p){const A=u||m||(b?v:h);p.defaultPrevented||A||!D.current||N.current||n(b,p)},onMouseLeave(){N.current||r()},onMouseUp(){N.current||r()}},E)},[S,u,w,g,d,I,t,f,T,v,h,D,C,M,m,i,n,r,_]);return s.useMemo(()=>({getCommonButtonProps:R}),[R])}const wn=s.forwardRef(function(t,n){const{render:r,className:o,disabled:c=!1,...l}=t,{state:f,inputRef:u,startAutoChange:m,stopAutoChange:d,minWithDefault:i,maxWithDefault:g,value:I,inputValue:S,disabled:w,readOnly:_,id:M,setValue:T,getStepAmount:D,incrementValue:C,allowInputSyncRef:x,formatOptionsRef:N,valueRef:j,isPressedRef:V,intentionalTouchCheckTimeoutRef:h,movesAfterTouchRef:v,locale:R}=ke(),{getCommonButtonProps:b}=ht({inputRef:u,startAutoChange:m,stopAutoChange:d,minWithDefault:i,maxWithDefault:g,value:I,inputValue:S,disabled:c||w,readOnly:_,id:M,setValue:T,getStepAmount:D,incrementValue:C,allowInputSyncRef:x,formatOptionsRef:N,valueRef:j,isPressedRef:V,intentionalTouchCheckTimeoutRef:h,movesAfterTouchRef:v,locale:R}),E=s.useCallback(p=>b(!0,p),[b]),{renderElement:B}=Ee({propGetter:E,ref:n,render:r??"button",state:f,className:o,extraProps:l,customStyleHookMapping:Ie});return B()}),Mn=s.forwardRef(function(t,n){const{render:r,className:o,disabled:c=!1,...l}=t,{allowInputSyncRef:f,disabled:u,formatOptionsRef:m,getStepAmount:d,id:i,incrementValue:g,inputRef:I,inputValue:S,intentionalTouchCheckTimeoutRef:w,isPressedRef:_,maxWithDefault:M,minWithDefault:T,movesAfterTouchRef:D,readOnly:C,setValue:x,startAutoChange:N,state:j,stopAutoChange:V,value:h,valueRef:v,locale:R}=ke(),{getCommonButtonProps:b}=ht({inputRef:I,startAutoChange:N,stopAutoChange:V,minWithDefault:T,maxWithDefault:M,value:h,inputValue:S,disabled:c||u,readOnly:C,id:i,setValue:x,getStepAmount:d,incrementValue:g,allowInputSyncRef:f,formatOptionsRef:m,valueRef:v,isPressedRef:_,intentionalTouchCheckTimeoutRef:w,movesAfterTouchRef:D,locale:R}),E=s.useCallback(p=>b(!1,p),[b]),{renderElement:B}=Ee({propGetter:E,ref:n,render:r??"button",state:j,className:o,extraProps:l,customStyleHookMapping:Ie});return B()}),Nn={...ln,...Ie},_n=s.forwardRef(function(t,n){const{render:r,className:o,...c}=t,{allowInputSyncRef:l,disabled:f,formatOptionsRef:u,getAllowedNonNumericKeys:m,getStepAmount:d,id:i,incrementValue:g,inputMode:I,inputValue:S,invalid:w,max:_,mergedRef:M,min:T,name:D,readOnly:C,required:x,setValue:N,state:j,valueRef:V,setInputValue:h,locale:v}=ke(),{labelId:R,validationMode:b,setTouched:E,setFocused:B}=Re(),{getInputValidationProps:p,getValidationProps:A,commitValidation:k,inputRef:q}=mt(),K=s.useRef(!1),ae=De(n,q,M),Pe=s.useCallback((Fe={})=>oe({id:i,required:x,name:D,disabled:f,readOnly:C,inputMode:I,value:S,ref:ae,type:"text",autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-roledescription":"Number field","aria-invalid":w||void 0,"aria-labelledby":R,suppressHydrationWarning:!0,onFocus(y){if(y.defaultPrevented||C||f||K.current)return;K.current=!0,B(!0);const F=y.currentTarget,$=F.value.length;F.setSelectionRange($,$)},onBlur(y){if(y.defaultPrevented||C||f)return;if(E(!0),B(!1),b==="onBlur"&&k(V.current),l.current=!0,S.trim()===""){N(null);return}const F=ve(S,v,u.current);F!==null&&N(F,y.nativeEvent)},onChange(y){if(y.nativeEvent.defaultPrevented)return;l.current=!1;const F=y.target.value;if(F.trim()===""){h(F),N(null,y.nativeEvent);return}if(y.isTrusted){h(F);return}const $=ve(F,v,u.current);$!==null&&(h(F),N($,y.nativeEvent))},onKeyDown(y){if(y.defaultPrevented||C||f)return;const F=y.nativeEvent;l.current=!0;const $=m();let Z=$.includes(y.key);const{decimal:pe,currency:ge,percentSign:Se}=We([],u.current),se=y.currentTarget.selectionStart,ie=y.currentTarget.selectionEnd,ue=se===0&&ie===S.length;if(y.key==="-"&&$.includes("-")){const X=se===0&&ie===1&&S[0]==="-";Z=!S.includes("-")||ue||X}[pe,ge,Se].forEach(X=>{if(y.key===X){const J=S.indexOf(X),Ne=se===J&&ie===J+1;Z=!S.includes(X)||ue||Ne}});const xe=/^[0-9]$/.test(y.key),we=He.test(y.key),Be=Ge.test(y.key),Me=["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter"].includes(y.key);if(y.which===229||y.altKey||y.ctrlKey||y.metaKey||Z||xe||we||Be||Me)return;const Y=ve(S,v,u.current),ce=d(y)??Ce;y.preventDefault(),y.key==="ArrowUp"?g(ce,1,Y,F):y.key==="ArrowDown"?g(ce,-1,Y,F):y.key==="Home"&&T!=null?N(T,F):y.key==="End"&&_!=null&&N(_,F)},onPaste(y){if(y.defaultPrevented||C||f)return;y.preventDefault();const $=(y.clipboardData||window.Clipboard).getData("text/plain"),Z=ve($,v,u.current);Z!==null&&(l.current=!1,N(Z,y.nativeEvent),h($))}},p(A(Fe))),[p,A,i,x,D,f,C,I,S,w,R,B,E,b,u,k,V,N,m,d,T,_,g,h,l,v,ae]),W=De(n,M),{renderElement:he}=Ee({propGetter:Pe,ref:W,render:r??"input",className:o,state:j,extraProps:c,customStyleHookMapping:Nn});return he()}),Tn="_Container_enatx_1",jn="_Field_enatx_6",Vn="_Group_enatx_23",Dn="_Input_enatx_28",kn="_Decrement_enatx_53",An="_Increment_enatx_54",de={Container:Tn,Field:jn,Group:Vn,Input:Dn,Decrement:kn,Increment:An},nt=({value:e,onChange:t,defaultValue:n=0,min:r,max:o,id:c,label:l})=>{const f=s.useId(),u=c||f,m=d=>{if(d===null)return;let i=d;r!==void 0&&(i=Math.max(i,r)),o!==void 0&&(i=Math.min(i,o)),t(i)};return a.jsxs("div",{className:de.Container,children:[l&&a.jsx("label",{htmlFor:u,children:l}),a.jsx(En,{id:u,value:e,defaultValue:n,className:de.Field,children:a.jsxs(In,{className:de.Group,children:[a.jsx(Mn,{className:de.Decrement,onClick:()=>m((e??0)-1),children:a.jsx(It,{})}),a.jsx(_n,{className:de.Input,value:e??"",onChange:d=>m(Number(d.target.value)||0)}),a.jsx(wn,{className:de.Increment,onClick:()=>m((e??0)+1),children:a.jsx(wt,{})})]})})]})},Pn=({value:e,onChange:t,defaultValue:n,id:r,label:o,sx:c})=>{const l=s.useId(),f=r||l;return a.jsx(gt,{variant:"outlined",label:o,value:e,onChange:u=>t(u.target.value),defaultValue:n,id:f,sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderWidth:"1px"},"&.Mui-focused fieldset":{borderWidth:"1px",borderColor:"secondary.main"}},...c}})};async function Fn(e,t){const n=Mt(...e),r=e.join("/"),c=(await jt(n)).data().count;let l,f=0;for(;;){const u=l?Xe(n,ze(Ke.MAX_BATCH_SIZE),kt(l)):Xe(n,ze(Ke.MAX_BATCH_SIZE)),d=(await Vt(u)).docs;if(d.length===0)break;const i=Dt(n.firestore);d.forEach(g=>i.delete(g.ref)),await i.commit(),f+=d.length,l=d[d.length-1],t==null||t({collectionPath:r,deleted:f,total:c})}return f}async function Bn(e,t){const n=[[le.USER_STATS,e,le.DAILY_SESSIONS],[le.USER_STATS,e,le.SESSION_GAPS],[le.USER_SESSIONS,e,le.SESSIONS]];for(const r of n)await Fn(r,t)}const Ln="_ModalBackdrop_1v2wn_1",On="_ConfirmBackdrop_1v2wn_2",Un="_Modal_1v2wn_1",Hn="_ConfirmBox_1v2wn_13",Gn="_Button_1v2wn_32",be={ModalBackdrop:Ln,ConfirmBackdrop:On,Modal:Un,ConfirmBox:Hn,Button:Gn};function Wn({userId:e}){const[t,n]=s.useState(!1),[r,o]=s.useState(!1),[c,l]=s.useState(null),[f,u]=s.useState(!1),m=()=>{n(!0)},d=()=>{n(!1)},i=async()=>{e&&(n(!1),o(!0),await Bn(e,I=>{l(I)}),l(null),u(!0))},g=async()=>{o(!1),u(!1),await rt()};return a.jsxs(a.Fragment,{children:[a.jsx(fe,{sx:{bgcolor:me.palette.error.main},variant:"outlined",onClick:m,fullWidth:!0,children:a.jsxs(U,{className:be.Button,children:[a.jsx(St,{fontSize:"small",className:te.MaterialIcon}),a.jsx("span",{children:" Delete My Data"})]})}),r&&a.jsx(U,{className:be.ModalBackdrop,children:a.jsx(U,{className:be.Modal,children:f?a.jsxs(a.Fragment,{children:[a.jsx(xt,{className:te.MaterialIcon,fontSize:"large",sx:{color:me.palette.success.main}}),a.jsx(re,{variant:"h5",mb:2,children:"Deletion Complete"}),a.jsx(fe,{variant:"contained",color:"success",onClick:g,children:"OK"})]}):a.jsxs(a.Fragment,{children:[a.jsx(re,{variant:"h5",mb:2,children:"Deleting Your Data"}),a.jsx(re,{variant:"body1",mb:2,sx:{wordBreak:"break-word",overflowWrap:"break-word",maxWidth:"100%"},children:c?`${c.deleted} / ${c.total} deleted from ${c.collectionPath}`:"Starting"})]})})}),t&&a.jsx(U,{className:be.ConfirmBackdrop,children:a.jsxs(U,{className:be.ConfirmBox,children:[a.jsx(yt,{className:te.MaterialIcon,fontSize:"large",sx:{color:me.palette.warning.main}}),a.jsx(re,{variant:"h5",mb:2,children:"Are you sure you want to delete all your data?"}),a.jsx(fe,{sx:{bgcolor:me.palette.error.main},onClick:i,children:"Yes, Delete Everything"}),a.jsx(fe,{onClick:d,children:"Cancel"})]})})]})}const $n="_LoadingContainer_c2vdk_1",Kn="_SettingsContainer_c2vdk_9",Xn="_SettingsContent_c2vdk_16",zn="_SettingsSection_c2vdk_26",qn="_SectionHeader_c2vdk_34",Yn="_SettingsItem_c2vdk_40",Zn="_ButtonContainer_c2vdk_48",Jn="_Button_c2vdk_48",G={LoadingContainer:$n,SettingsContainer:Kn,SettingsContent:Xn,SettingsSection:zn,SectionHeader:qn,SettingsItem:Yn,ButtonContainer:Zn,Button:Jn},Qn={hidden:{opacity:0,x:-20},visible:e=>({opacity:1,x:0,transition:{delay:e*.1,duration:.4,ease:"easeOut"}})},_e=({children:e,index:t,className:n})=>a.jsx(ot.div,{className:n,variants:Qn,initial:"hidden",animate:"visible",custom:t,children:e});function ir(){const n=Le(x=>x.settings),r=Le(x=>x.updateTargetDuration),o=Nt(x=>x.user),c=Le(x=>x.updateName),l=()=>n?Math.floor(n.targetDuration/3600):0,f=()=>n?Math.floor(n.targetDuration/60%60):0,[u,m]=s.useState(l()),[d,i]=s.useState(f()),[g,I]=s.useState((n==null?void 0:n.name)||""),[S,w]=s.useState(!1);s.useEffect(()=>{if(n!==null){const x=n.targetDuration;m(Math.floor(x/3600)),i(Math.floor(x%3600/60)),I(n.name),w(!1)}},[n]);const _=x=>{x!==null&&(m(Math.min(x,744)),w(!0))},M=x=>{x!==null&&(i(Math.min(x,59)),w(!0))},T=x=>{x!==null&&(I(x),w(!0))},D=async()=>{C();try{await Tt(),w(!1)}catch(x){console.error("Error saving user settings:",x)}},C=()=>{const x=u*3600+d*60;r(x),c(g)};return n?a.jsxs(U,{className:G.SettingsContainer,children:[a.jsxs(_e,{className:te.Header,index:0,children:[a.jsx(bt,{className:te.MaterialIcon,fontSize:"large"}),a.jsx(re,{variant:"h2",children:"Settings"})]}),a.jsxs(U,{className:G.SettingsContent,children:[a.jsxs(_e,{index:1,className:G.SettingsSection,children:[a.jsxs(U,{className:G.SectionHeader,children:[a.jsx(vt,{className:te.MaterialIcon,fontSize:"medium"}),a.jsx(re,{variant:"h3",children:"Timer"})]}),a.jsxs(U,{className:G.SettingsItem,children:[a.jsx("label",{children:"Hours"}),a.jsx(nt,{value:u,onChange:_,min:0,max:744})]}),a.jsxs(U,{className:G.SettingsItem,children:[a.jsx("label",{children:"Minutes"}),a.jsx(nt,{value:d,onChange:M,min:0,max:59})]})]}),a.jsxs(_e,{index:2,className:G.SettingsSection,children:[a.jsxs(U,{className:G.SectionHeader,children:[a.jsx(Ct,{className:te.MaterialIcon,fontSize:"medium"}),a.jsx(re,{variant:"h3",children:"Account"})]}),a.jsxs(U,{className:G.SettingsItem,children:[a.jsx("label",{children:"Email"}),a.jsx(re,{sx:{color:me.palette.grey[400]},children:n.email})]}),a.jsxs(U,{className:G.SettingsItem,children:[a.jsx("label",{children:"Name"}),a.jsx(Pn,{value:g,onChange:T})]})]}),a.jsx(_e,{index:3,children:a.jsxs(U,{className:G.SettingsSection,children:[a.jsx(Wn,{userId:o==null?void 0:o.uid}),a.jsx(fe,{sx:{bgcolor:me.palette.error.main},variant:"contained",onClick:rt,fullWidth:!0,children:a.jsxs(U,{className:G.Button,children:[a.jsx(Rt,{fontSize:"small",className:te.MaterialIcon}),a.jsx("span",{children:" Sign Out"})]})})]})})]}),a.jsx(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.4},className:G.ButtonContainer,children:a.jsx(fe,{variant:"contained",color:"primary",disabled:!S,onClick:D,fullWidth:!0,children:a.jsxs(U,{className:G.Button,children:[a.jsx(Et,{fontSize:"small",className:te.MaterialIcon}),a.jsx("span",{children:"Save"})]})})})]}):a.jsx(U,{className:G.LoadingContainer,children:a.jsx(_t,{})})}export{ir as default};
