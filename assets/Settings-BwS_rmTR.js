import{r as s,n as He,o as gt,j as a,p as St,B as U,q as xt,e as re,s as yt,W as bt,S as vt,t as Rt,A as Ct,L as Et,u as wt}from"./mui-MagnalEl.js";import{B as fe}from"./BaseButton-ne2w8NBM.js";import{M as It,P as Mt}from"./CustomIcons-CWV8PEy9.js";import{D as ae,i as Le,j as Xe,t as me,k as ot,c as Oe,b as Nt,L as _t,m as Tt}from"./index-BGNx3duG.js";import{d as jt,n as Dt,p as Vt,f as kt,r as At,q as ze,l as qe,h as Pt,w as Ft,s as Bt}from"./firebase-CZ1iWosV.js";import{g as te}from"./GlobalStyles.module-D1S20KA9.js";import{m as st}from"./proxy-Bgyb-AjX.js";const at=s.createContext(void 0);function ke(){const e=s.useContext(at);if(e===void 0)throw new Error("Base UI: NumberFieldRootContext is missing. NumberField parts must be placed within <NumberField.Root>.");return e}const Lt=60,Ot=400,Ut=50,Ht=3,Gt=8,Re=1;function Te(e){return e&&e.ownerDocument||document}function Ae(e){return Te(e).defaultView||window}function Wt(e,t){const n=Ae(t),r=t.getBoundingClientRect();if(r&&e!=null)return{x:r.left-e/2,y:r.top-e/2,width:r.right+e/2,height:r.bottom+e/2};const o=n.visualViewport;return o?{x:o.offsetLeft,y:o.offsetTop,width:o.offsetLeft+o.width,height:o.offsetTop+o.height}:{x:0,y:0,width:n.document.documentElement.clientWidth,height:n.document.documentElement.clientHeight}}function $t(e,t){const n=Ae(e).visualViewport;if(!n)return()=>{};function r(){n&&(t.current=n.scale)}return r(),n.addEventListener("resize",r),()=>{n.removeEventListener("resize",r)}}const ne=typeof window<"u"?s.useLayoutEffect:s.useEffect;function je(e){const t=s.useRef(e);return ne(()=>{t.current=e}),t}function Kt(){if(typeof navigator>"u")return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e!=null&&e.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints}}function Xt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none")}function zt(){const e=Kt();return e.platform==="MacIntel"&&e.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(e.platform)}function oe(...e){if(e.length===0)return{};if(e.length===1)return Ye(e[0],{});let t=Ye(e[0],{});for(let n=1;n<e.length;n+=1){const r=e[n];r&&(it(r)?t=r(t):t=qt(t,r))}return t??{}}function Ye(e,t){return it(e)?e(t):e??{}}function qt(e,t){return t?e?Object.entries(t).reduce((n,[r,o])=>(Yt(r,o)?n[r]=Zt(e[r],o):r==="style"?n[r]=Qt(e.style,o):r==="className"?n[r]=en(e.className,o):n[r]=o,n),{...e}):t:e||{}}function Yt(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function it(e){return typeof e=="function"}function Zt(e,t){return n=>{if(tn(n)){const o=n;Jt(o);const u=t(o);return o.baseUIHandlerPrevented||e==null||e(o),u}const r=t(n);return e==null||e(n),r}}function Jt(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function Qt(e,t){if(t||e)return{...e,...t}}function en(e,t){return t?e?t+" "+e:t:e}function tn(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}let nn=function(e){return e.scrubbing="data-scrubbing",e.disabled="data-disabled",e.readonly="data-readonly",e.required="data-required",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});function ee(e){const t=s.useRef(e);return ne(()=>{t.current=e}),s.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function rn(e){const{disabled:t,readOnly:n,value:r,inputRef:o,incrementValue:u,getStepAmount:c}=e,f=je(r),l=s.useRef(null),d=s.useRef(null),m=s.useRef(!1),i=s.useRef(null),y=s.useRef({x:0,y:0}),w=s.useRef(1),[g,I]=s.useState(!1),[_,M]=s.useState(!1),[T,V]=s.useState(!1);s.useEffect(()=>{if(!(!g||!i.current))return $t(i.current,w)},[g]);const R=ee((D,h)=>{i.current&&(i.current.style.transform=`translate3d(${D}px,${h}px,0) scale(${1/w.current})`)}),S=s.useCallback(({movementX:D,movementY:h})=>{const v=i.current,C=d.current,b=l.current;if(!v||!C||!b)return;const E=Wt(b.teleportDistance,C),B=y.current,p={x:Math.round(B.x+D),y:Math.round(B.y+h)},A=v.offsetWidth,k=v.offsetHeight;p.x+A/2<E.x?p.x=E.width-A/2:p.x+A/2>E.width&&(p.x=E.x-A/2),p.y+k/2<E.y?p.y=E.height-k/2:p.y+k/2>E.height&&(p.y=E.y-k/2),y.current=p,R(p.x,p.y)},[R]),N=s.useCallback((D,{clientX:h,clientY:v})=>{He.flushSync(()=>{I(D)});const C=i.current;if(!C||!D)return;const b={x:h-C.offsetWidth/2,y:v-C.offsetHeight/2};y.current=b,R(b.x,b.y)},[R]),j=s.useCallback((D={})=>oe({role:"presentation",[nn.scrubbing]:g||void 0,style:{touchAction:"none",WebkitUserSelect:"none",userSelect:"none"},async onPointerDown(h){var b;const v=!h.button||h.button===0;if(h.defaultPrevented||n||!v||t)return;const C=h.pointerType==="touch";if(M(C),h.pointerType==="mouse"&&(h.preventDefault(),(b=o.current)==null||b.focus()),m.current=!0,N(!0,h.nativeEvent),!C&&!Xt())try{await Te(d.current).body.requestPointerLock(),V(!1)}catch{V(!0)}finally{He.flushSync(()=>{N(!0,h.nativeEvent)})}}},D),[n,t,N,o,g]);return s.useEffect(function(){if(!o.current||t||n)return;let h=0;function v(E){try{Te(d.current).exitPointerLock()}catch{}finally{m.current=!1,N(!1,E)}}function C(E){if(!m.current||!l.current)return;E.preventDefault(),S(E);const{direction:B,pixelSensitivity:p}=l.current,{movementX:A,movementY:k}=E;if(h+=B==="vertical"?k:A,Math.abs(h)>=p){h=0;const q=B==="vertical"?-k:A;u(q*(c(E)??Re),1)}}const b=Ae(o.current);return b.addEventListener("pointerup",v,!0),b.addEventListener("pointermove",C,!0),()=>{b.removeEventListener("pointerup",v,!0),b.removeEventListener("pointermove",C,!0)}},[t,n,u,f,c,o,N,S]),s.useEffect(function(){const h=d.current;if(!h||t||n)return;function v(C){C.touches.length===1&&C.preventDefault()}return h.addEventListener("touchstart",v),()=>{h.removeEventListener("touchstart",v)}},[t,n]),s.useMemo(()=>({isScrubbing:g,isTouchInput:_,isPointerLockDenied:T,getScrubAreaProps:j,scrubAreaCursorRef:i,scrubAreaRef:d,scrubHandleRef:l}),[g,_,T,j])}const Ze=new Map;function De(e,t){const n=JSON.stringify({locale:e,options:t}),r=Ze.get(n);if(r)return r;const o=new Intl.NumberFormat(e,t);return Ze.set(n,o),o}function Je(e,t,n){return e==null?"":De(t,n).format(e)}function on(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function Ue(e,t={}){return parseFloat(De("en-US",{maximumFractionDigits:t.maximumFractionDigits,minimumFractionDigits:t.minimumFractionDigits,useGrouping:!1}).format(e))}function sn(e,{step:t,minWithDefault:n,maxWithDefault:r,minWithZeroDefault:o,format:u,snapOnStep:c,small:f}){if(e===null)return e;const l=on(e,n,r);if(t!=null&&c){if(f){const m=(l-o)/t,i=Math.round(m),y=o+i*t;return Ue(y,u)}const d=n!==Number.MIN_SAFE_INTEGER?n:o;if(t>0){const m=l-t,i=Math.floor((m-d)/t);return Ue(d+i*t+t,u)}if(t<0){const m=Math.abs(t),i=l-t,y=Math.ceil((i-d)/m);return Ue(d+y*m+t,u)}}return l}const ut=["零","一","二","三","四","五","六","七","八","九"],ct=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"],lt=["%","٪"],Ge=new RegExp(`[${ct.join("")}]`,"g"),We=new RegExp(`[${ut.join("")}]`,"g"),an=new RegExp(`[${lt.join("")}]`);function $e(e,t){const n=De(e,t).formatToParts(11111.1),r={};return n.forEach(o=>{r[o.type]=o.value}),De(e).formatToParts(.1).forEach(o=>{o.type==="decimal"&&(r[o.type]=o.value)}),r}function ve(e,t,n){let r=t;r===void 0&&(Ge.test(e)?r="ar":We.test(e)&&(r="zh"));const{group:o,decimal:u,currency:c,unit:f}=$e(r,n);let l=null;o&&(l=new RegExp("\\p{Zs}","u").test(o)?new RegExp("\\p{Zs}","gu"):new RegExp(`\\${o}`,"g"));const m=[{regex:o?l:null,replacement:""},{regex:u?new RegExp(`\\${u}`,"g"):null,replacement:"."},{regex:c?new RegExp(`\\${c}`,"g"):null,replacement:""},{regex:f?new RegExp(`\\${f}`,"g"):null,replacement:""},{regex:Ge,replacement:I=>ct.indexOf(I).toString()},{regex:We,replacement:I=>ut.indexOf(I).toString()}].reduce((I,{regex:_,replacement:M})=>_?I.replace(_,M):I,e);let i=parseFloat(m);const y=n==null?void 0:n.style,w=y==="unit"&&(n==null?void 0:n.unit)==="percent",g=an.test(e)||y==="percent";return!w&&g&&(i/=100),Number.isNaN(i)?null:i}function un({controlled:e,default:t,name:n,state:r="value"}){const{current:o}=s.useRef(e!==void 0),[u,c]=s.useState(t),f=o?e:u,l=s.useCallback(d=>{o||c(d)},[]);return[f,l]}function cn(){const[,e]=s.useState({});return s.useCallback(()=>{e({})},[])}let Qe=0;function ln(e,t="mui"){const[n,r]=s.useState(e),o=e||n;return s.useEffect(()=>{n==null&&(Qe+=1,r(`${t}-${Qe}`))},[n,t]),o}const dn={...gt},et=dn.useId;function fn(e,t){if(et!==void 0){const n=et();return e??`${t}-${n}`}return ln(e,t)}function mn(e){return fn(e,"base-ui")}let tt=function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});const dt={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},hn={valid(e){return e===null?null:e?{[tt.valid]:""}:{[tt.invalid]:""}}},Q=()=>{},pn=s.createContext({invalid:void 0,controlId:void 0,setControlId:Q,labelId:void 0,setLabelId:Q,messageIds:[],setMessageIds:Q,name:void 0,validityData:{state:dt,errors:[],error:"",value:"",initialValue:null},setValidityData:Q,disabled:void 0,touched:!1,setTouched:Q,dirty:!1,setDirty:Q,filled:!1,setFilled:Q,focused:!1,setFocused:Q,validate:()=>null,validationMode:"onBlur",validationDebounceTime:0,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1}});function Ce(e=!0){const t=s.useContext(pn);if(t.setControlId===Q&&!e)throw new Error("Base UI: FieldRootContext is missing. Field parts must be placed within <Field.Root>.");return t}const gn=s.createContext({formRef:{current:{fields:new Map}},errors:{},onClearErrors:()=>{}});function ft(){return s.useContext(gn)}function mt(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}const Sn=Object.keys(dt);function ht(){const{setValidityData:e,validate:t,messageIds:n,validityData:r,validationMode:o,validationDebounceTime:u,invalid:c,markedDirtyRef:f,controlId:l,state:d}=Ce(),{formRef:m}=ft(),i=s.useRef(-1),y=s.useRef(null);s.useEffect(()=>()=>{window.clearTimeout(i.current)},[]);const w=ee(async _=>{const M=y.current;if(!M)return;function T(h){return Sn.reduce((v,C)=>(v[C]=h.validity[C],!h.validity.customError&&!f.current&&(v[C]=C==="valid"),v),{})}window.clearTimeout(i.current);const V=t(_);let R=null;typeof V=="object"&&V!==null&&"then"in V?R=await V:R=V;let S="";R!==null&&(S=Array.isArray(R)?R.join(`
`):R),M.setCustomValidity(S);const N=T(M);let j=[];Array.isArray(R)?j=R:R?j=[R]:M.validationMessage&&(j=[M.validationMessage]);const D={value:_,state:N,error:Array.isArray(R)?R[0]:R??M.validationMessage,errors:j,initialValue:r.initialValue};if(l){const h=m.current.fields.get(l);h&&m.current.fields.set(l,{...h,...mt(D,c)})}e(D)}),g=s.useCallback((_={})=>oe({...n.length&&{"aria-describedby":n.join(" ")},...d.valid===!1&&{"aria-invalid":!0}},_),[n,d.valid]),I=s.useCallback((_={})=>oe({onChange(M){if(M.nativeEvent.defaultPrevented||c||o!=="onChange")return;const T=M.currentTarget;if(T.value===""){w(T.value);return}window.clearTimeout(i.current),u?i.current=window.setTimeout(()=>{w(T.value)},u):w(T.value)}},g(_)),[g,c,o,u,w]);return s.useMemo(()=>({getValidationProps:g,getInputValidationProps:I,inputRef:y,commitValidation:w}),[g,I,w])}function Ve(...e){const t=s.useRef(void 0),n=s.useCallback(r=>{const o=e.map(u=>{if(u==null)return null;if(typeof u=="function"){const c=u,f=c(r);return typeof f=="function"?f:()=>{c(null)}}return u.current=r,()=>{u.current=null}});return()=>{o.forEach(u=>u==null?void 0:u())}},e);return s.useMemo(()=>e.every(r=>r==null)?null:r=>{t.current&&(t.current(),t.current=void 0),r!=null&&(t.current=n(r))},e)}function xn(e){const{formRef:t}=ft(),{invalid:n,markedDirtyRef:r,validityData:o,setValidityData:u}=Ce(),{value:c,id:f,controlRef:l,commitValidation:d}=e,m=je(e.getValue);ne(()=>{var y;let i=c;i===void 0&&(i=(y=m.current)==null?void 0:y.call(m)),o.initialValue===null&&i!==o.initialValue&&u(w=>({...w,initialValue:i}))},[u,c,o.initialValue,m]),ne(()=>{f&&t.current.fields.set(f,{controlRef:l,validityData:mt(o,n),validate(){var y;let i=c;i===void 0&&(i=(y=m.current)==null?void 0:y.call(m)),r.current=!0,He.flushSync(()=>d(i))}})},[d,l,t,m,f,n,r,o,c])}function yn(e){const{id:t,name:n,min:r,max:o,smallStep:u=.1,step:c=1,largeStep:f=10,required:l=!1,disabled:d=!1,invalid:m=!1,readOnly:i=!1,allowWheelScrub:y=!1,snapOnStep:w=!1,format:g,value:I,onValueChange:_,defaultValue:M,locale:T}=e,{setControlId:V,validationMode:R,setDirty:S,validityData:N,setValidityData:j,disabled:D,setFilled:h}=Ce(),{inputRef:v,commitValidation:C}=ht(),b=D||d,E=r??Number.MIN_SAFE_INTEGER,B=o??Number.MAX_SAFE_INTEGER,p=r??0,A=g==null?void 0:g.style,k=s.useRef(null),q=Ve(k,v),K=mn(t);ne(()=>(V(K),()=>{V(void 0)}),[K,V]);const[ie,Pe]=un({controlled:I,default:M,name:"NumberField",state:"value"}),W=ie??null,he=je(W);ne(()=>{h(W!==null)},[h,W]),xn({id:K,commitValidation:C,value:W,controlRef:k});const Fe=cn(),x=je(g),F=ee(_),$=s.useRef(-1),Z=s.useRef(-1),pe=s.useRef(-1),ge=s.useRef(!1),Se=s.useRef(0),se=s.useRef(!0),ue=s.useRef(()=>{});ne(()=>{N.initialValue===null&&W!==N.initialValue&&j(O=>({...O,initialValue:W}))},[j,N.initialValue,W]);const[ce,xe]=s.useState(()=>Je(W,T,g)),[Ie,Be]=s.useState("numeric"),Me=ee(()=>{const{decimal:O,group:P,currency:H}=$e(T,g),L=Array.from(new Set([".",",",O,P]));return A==="percent"&&L.push(...lt),A==="currency"&&H&&L.push(H),E<0&&L.push("-"),L}),Y=ee(O=>O!=null&&O.altKey?u:O!=null&&O.shiftKey?f:c),le=ee((O,P,H)=>{const L=P,z=sn(O,{step:H?Y(L)*H:void 0,format:x.current,minWithDefault:E,maxWithDefault:B,minWithZeroDefault:p,snapOnStep:w,small:(L==null?void 0:L.altKey)??!1});F==null||F(z,P&&"nativeEvent"in P?P.nativeEvent:P),Pe(z),S(z!==N.initialValue),R==="onChange"&&C(z),Fe()}),X=ee((O,P,H,L)=>{const z=H??he.current,ye=typeof z=="number"?z+O*P:Math.max(0,r??0);le(ye,L,P)}),J=ee(()=>{window.clearTimeout(pe.current),window.clearTimeout($.current),window.clearInterval(Z.current),ue.current(),Se.current=0}),Ne=ee((O,P)=>{if(J(),!k.current)return;const H=Ae(k.current);function L(ye){ye.preventDefault()}H.addEventListener("contextmenu",L),ue.current=()=>{H.removeEventListener("contextmenu",L)},H.addEventListener("pointerup",()=>{ge.current=!1,J()},{once:!0});function z(){const ye=Y(P)??Re;X(ye,O?1:-1,void 0,P)}z(),$.current=window.setTimeout(()=>{Z.current=window.setInterval(z,Lt)},Ot)});ne(function(){if(!se.current)return;const P=Je(W,T,x.current);P!==ce&&xe(P)}),ne(function(){if(!zt())return;let P="text";E>=0&&(P="decimal"),Be(P)},[E,A]),s.useEffect(()=>()=>J(),[J]),s.useEffect(function(){const P=k.current;if(b||i||!y||!P)return;function H(L){if(L.ctrlKey||Te(k.current).activeElement!==k.current)return;L.preventDefault();const z=Y(L)??Re;X(z,L.deltaY>0?-1:1,void 0,L)}return P.addEventListener("wheel",H),()=>{P.removeEventListener("wheel",H)}},[y,X,b,i,f,c,Y]);const Ke=rn({disabled:b,readOnly:i,value:W,inputRef:k,incrementValue:X,getStepAmount:Y});return s.useMemo(()=>({inputRef:k,mergedRef:q,inputValue:ce,value:W,startAutoChange:Ne,stopAutoChange:J,minWithDefault:E,maxWithDefault:B,disabled:b,readOnly:i,id:K,setValue:le,incrementValue:X,getStepAmount:Y,allowInputSyncRef:se,formatOptionsRef:x,valueRef:he,isPressedRef:ge,intentionalTouchCheckTimeoutRef:pe,movesAfterTouchRef:Se,name:n,required:l,invalid:m,inputMode:Ie,getAllowedNonNumericKeys:Me,min:r,max:o,setInputValue:xe,locale:T,...Ke}),[k,q,ce,W,Ke,Ne,J,E,B,b,i,K,le,X,Y,se,x,he,ge,pe,Se,n,l,m,Ie,Me,r,o,xe,T])}function bn(e,t){let n={};return Object.entries(e).forEach(([r,o])=>{if(t!=null&&t.hasOwnProperty(r)){const u=t[r](o);u!=null&&(n={...n,...u});return}o===!0?n[`data-${r.toLowerCase()}`]="":o&&(n[`data-${r.toLowerCase()}`]=o.toString())}),n}function vn(e,t){return typeof e=="function"?e(t):e}function Rn(e,t,n){return typeof e=="function"?e(t,n):s.cloneElement(e,{...oe(t,e.props),ref:t.ref})}const Cn=parseInt(s.version,10);function En(e){return Cn>=e}function wn(e,...t){let n;return typeof e!="function"?n=En(19)?e.props.ref:e.ref:n=null,Ve(n,...t)}function In(e){return function(n){return e==="button"?a.jsx("button",{type:"button",...n}):e==="img"?a.jsx("img",{alt:"",...n}):a.jsx(e,{...n})}}const nt={};function Mn(e,t,n={}){const{className:r,render:o}=t,{propGetter:u=M=>M,state:c=nt,ref:f,props:l,customStyleHookMapping:d,styleHooks:m=!0}=n,i=o||(typeof e=="string"?In(e):e),y=vn(r,c),w=s.useMemo(()=>m?bn(c,d):nt,[c,d,m]),g=u({...w,...Array.isArray(l)?oe(...l):l});let I=[];f!==void 0&&(I=Array.isArray(f)?f:[f]);const _={...g,ref:wn(i,g.ref,...I)};return y!==void 0&&(_.className=y),()=>Rn(i,_,c)}function Ee(e){const t=typeof e.render=="string"?e.render:void 0,n=typeof e.render=="string"?void 0:e.render;return{renderElement:Mn(t,{className:e.className,render:n},{...e,props:e.extraProps})}}const we={inputValue:()=>null,value:()=>null},Nn=s.forwardRef(function(t,n){const{id:r,min:o,max:u,smallStep:c,step:f,largeStep:l,required:d=!1,disabled:m=!1,readOnly:i=!1,name:y,defaultValue:w,value:g,onValueChange:I,allowWheelScrub:_,snapOnStep:M,format:T,locale:V,render:R,className:S,...N}=t,j=yn(t),{state:D,disabled:h}=Ce(),v=h||m,C=s.useMemo(()=>({...D,disabled:v,readOnly:i,required:d,value:j.value,inputValue:j.inputValue,scrubbing:j.isScrubbing}),[D,v,i,d,j.value,j.inputValue,j.isScrubbing]),b=s.useMemo(()=>({...j,state:C}),[j,C]),{renderElement:E}=Ee({ref:n,render:R??"div",state:C,className:S,extraProps:N,customStyleHookMapping:we});return a.jsx(at.Provider,{value:b,children:E()})}),_n=s.forwardRef(function(t,n){const{render:r,className:o,...u}=t,{state:c}=ke(),f=s.useCallback((d={})=>oe({role:"group"},d),[]),{renderElement:l}=Ee({propGetter:f,ref:n,render:r??"div",state:c,className:o,extraProps:u,customStyleHookMapping:we});return l()});function pt(e){const{inputRef:t,startAutoChange:n,stopAutoChange:r,minWithDefault:o,maxWithDefault:u,value:c,inputValue:f,disabled:l,readOnly:d,id:m,setValue:i,getStepAmount:y,incrementValue:w,allowInputSyncRef:g,formatOptionsRef:I,valueRef:_,movesAfterTouchRef:M,intentionalTouchCheckTimeoutRef:T,isPressedRef:V,locale:R}=e,S=s.useRef({x:0,y:0}),N=s.useRef(!1),j=s.useRef(!1),D=s.useRef(""),h=c!=null&&c<=o,v=c!=null&&c>=u,C=s.useCallback((b,E={})=>{function B(p){g.current=!0;const A=ve(f,R,I.current);A!==null&&(_.current=A,i(A,p))}return oe({disabled:l||(b?v:h),type:"button","aria-readonly":d||void 0,"aria-label":b?"Increase":"Decrease","aria-controls":m,tabIndex:-1,style:{WebkitUserSelect:"none",userSelect:"none"},onTouchStart(){N.current=!0},onTouchEnd(){N.current=!1},onClick(p){const A=l||d||(b?v:h);if(p.defaultPrevented||A||(D.current==="touch"?j.current:p.detail!==0))return;B(p.nativeEvent);const k=y(p)??Re;w(k,b?1:-1,void 0,p.nativeEvent)},onPointerDown(p){var q;const A=!p.button||p.button===0,k=l||(b?v:h);p.defaultPrevented||d||!A||k||(D.current=p.pointerType,j.current=!1,V.current=!0,S.current={x:p.clientX,y:p.clientY},B(p.nativeEvent),p.pointerType!=="touch"?(p.preventDefault(),(q=t.current)==null||q.focus(),n(b,p)):T.current=window.setTimeout(()=>{const K=M.current;M.current=0,K!=null&&K<Ht?(j.current=!0,n(b,p)):r()},Ut))},onPointerMove(p){if(l||d||(b?v:h)||p.pointerType!=="touch"||!V.current)return;M.current!=null&&(M.current+=1);const{x:k,y:q}=S.current,K=k-p.clientX,ie=q-p.clientY;K**2+ie**2>Gt**2&&r()},onMouseEnter(p){const A=l||d||(b?v:h);p.defaultPrevented||A||!V.current||N.current||n(b,p)},onMouseLeave(){N.current||r()},onMouseUp(){N.current||r()}},E)},[g,l,I,y,m,w,t,f,T,v,h,V,R,M,d,i,n,r,_]);return s.useMemo(()=>({getCommonButtonProps:C}),[C])}const Tn=s.forwardRef(function(t,n){const{render:r,className:o,disabled:u=!1,...c}=t,{state:f,inputRef:l,startAutoChange:d,stopAutoChange:m,minWithDefault:i,maxWithDefault:y,value:w,inputValue:g,disabled:I,readOnly:_,id:M,setValue:T,getStepAmount:V,incrementValue:R,allowInputSyncRef:S,formatOptionsRef:N,valueRef:j,isPressedRef:D,intentionalTouchCheckTimeoutRef:h,movesAfterTouchRef:v,locale:C}=ke(),{getCommonButtonProps:b}=pt({inputRef:l,startAutoChange:d,stopAutoChange:m,minWithDefault:i,maxWithDefault:y,value:w,inputValue:g,disabled:u||I,readOnly:_,id:M,setValue:T,getStepAmount:V,incrementValue:R,allowInputSyncRef:S,formatOptionsRef:N,valueRef:j,isPressedRef:D,intentionalTouchCheckTimeoutRef:h,movesAfterTouchRef:v,locale:C}),E=s.useCallback(p=>b(!0,p),[b]),{renderElement:B}=Ee({propGetter:E,ref:n,render:r??"button",state:f,className:o,extraProps:c,customStyleHookMapping:we});return B()}),jn=s.forwardRef(function(t,n){const{render:r,className:o,disabled:u=!1,...c}=t,{allowInputSyncRef:f,disabled:l,formatOptionsRef:d,getStepAmount:m,id:i,incrementValue:y,inputRef:w,inputValue:g,intentionalTouchCheckTimeoutRef:I,isPressedRef:_,maxWithDefault:M,minWithDefault:T,movesAfterTouchRef:V,readOnly:R,setValue:S,startAutoChange:N,state:j,stopAutoChange:D,value:h,valueRef:v,locale:C}=ke(),{getCommonButtonProps:b}=pt({inputRef:w,startAutoChange:N,stopAutoChange:D,minWithDefault:T,maxWithDefault:M,value:h,inputValue:g,disabled:u||l,readOnly:R,id:i,setValue:S,getStepAmount:m,incrementValue:y,allowInputSyncRef:f,formatOptionsRef:d,valueRef:v,isPressedRef:_,intentionalTouchCheckTimeoutRef:I,movesAfterTouchRef:V,locale:C}),E=s.useCallback(p=>b(!1,p),[b]),{renderElement:B}=Ee({propGetter:E,ref:n,render:r??"button",state:j,className:o,extraProps:c,customStyleHookMapping:we});return B()}),Dn={...hn,...we},Vn=s.forwardRef(function(t,n){const{render:r,className:o,...u}=t,{allowInputSyncRef:c,disabled:f,formatOptionsRef:l,getAllowedNonNumericKeys:d,getStepAmount:m,id:i,incrementValue:y,inputMode:w,inputValue:g,invalid:I,max:_,mergedRef:M,min:T,name:V,readOnly:R,required:S,setValue:N,state:j,valueRef:D,setInputValue:h,locale:v}=ke(),{labelId:C,validationMode:b,setTouched:E,setFocused:B}=Ce(),{getInputValidationProps:p,getValidationProps:A,commitValidation:k,inputRef:q}=ht(),K=s.useRef(!1),ie=Ve(n,q,M),Pe=s.useCallback((Fe={})=>oe({id:i,required:S,name:V,disabled:f,readOnly:R,inputMode:w,value:g,ref:ie,type:"text",autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-roledescription":"Number field","aria-invalid":I||void 0,"aria-labelledby":C,suppressHydrationWarning:!0,onFocus(x){if(x.defaultPrevented||R||f||K.current)return;K.current=!0,B(!0);const F=x.currentTarget,$=F.value.length;F.setSelectionRange($,$)},onBlur(x){if(x.defaultPrevented||R||f)return;if(E(!0),B(!1),b==="onBlur"&&k(D.current),c.current=!0,g.trim()===""){N(null);return}const F=ve(g,v,l.current);F!==null&&N(F,x.nativeEvent)},onChange(x){if(x.nativeEvent.defaultPrevented)return;c.current=!1;const F=x.target.value;if(F.trim()===""){h(F),N(null,x.nativeEvent);return}if(x.isTrusted){h(F);return}const $=ve(F,v,l.current);$!==null&&(h(F),N($,x.nativeEvent))},onKeyDown(x){if(x.defaultPrevented||R||f)return;const F=x.nativeEvent;c.current=!0;const $=d();let Z=$.includes(x.key);const{decimal:pe,currency:ge,percentSign:Se}=$e([],l.current),se=x.currentTarget.selectionStart,ue=x.currentTarget.selectionEnd,ce=se===0&&ue===g.length;if(x.key==="-"&&$.includes("-")){const X=se===0&&ue===1&&g[0]==="-";Z=!g.includes("-")||ce||X}[pe,ge,Se].forEach(X=>{if(x.key===X){const J=g.indexOf(X),Ne=se===J&&ue===J+1;Z=!g.includes(X)||ce||Ne}});const xe=/^[0-9]$/.test(x.key),Ie=Ge.test(x.key),Be=We.test(x.key),Me=["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter"].includes(x.key);if(x.which===229||x.altKey||x.ctrlKey||x.metaKey||Z||xe||Ie||Be||Me)return;const Y=ve(g,v,l.current),le=m(x)??Re;x.preventDefault(),x.key==="ArrowUp"?y(le,1,Y,F):x.key==="ArrowDown"?y(le,-1,Y,F):x.key==="Home"&&T!=null?N(T,F):x.key==="End"&&_!=null&&N(_,F)},onPaste(x){if(x.defaultPrevented||R||f)return;x.preventDefault();const $=(x.clipboardData||window.Clipboard).getData("text/plain"),Z=ve($,v,l.current);Z!==null&&(c.current=!1,N(Z,x.nativeEvent),h($))}},p(A(Fe))),[p,A,i,S,V,f,R,w,g,I,C,B,E,b,l,k,D,N,d,m,T,_,y,h,c,v,ie]),W=Ve(n,M),{renderElement:he}=Ee({propGetter:Pe,ref:W,render:r??"input",className:o,state:j,extraProps:u,customStyleHookMapping:Dn});return he()}),kn="_Container_enatx_1",An="_Field_enatx_6",Pn="_Group_enatx_23",Fn="_Input_enatx_28",Bn="_Decrement_enatx_53",Ln="_Increment_enatx_54",de={Container:kn,Field:An,Group:Pn,Input:Fn,Decrement:Bn,Increment:Ln},rt=({value:e,onChange:t,defaultValue:n=0,min:r,max:o,id:u,label:c})=>{const f=s.useId(),l=u||f,d=m=>{if(m===null)return;let i=m;r!==void 0&&(i=Math.max(i,r)),o!==void 0&&(i=Math.min(i,o)),t(i)};return a.jsxs("div",{className:de.Container,children:[c&&a.jsx("label",{htmlFor:l,children:c}),a.jsx(Nn,{id:l,value:e,defaultValue:n,className:de.Field,children:a.jsxs(_n,{className:de.Group,children:[a.jsx(jn,{className:de.Decrement,onClick:()=>d((e??0)-1),children:a.jsx(It,{})}),a.jsx(Vn,{className:de.Input,value:e??"",onChange:m=>d(Number(m.target.value)||0)}),a.jsx(Tn,{className:de.Increment,onClick:()=>d((e??0)+1),children:a.jsx(Mt,{})})]})})]})},On=({value:e,onChange:t,defaultValue:n,id:r,label:o,sx:u})=>{const c=s.useId(),f=r||c;return a.jsx(St,{variant:"outlined",label:o,value:e,onChange:l=>t(l.target.value),defaultValue:n,id:f,sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderWidth:"1px"},"&.Mui-focused fieldset":{borderWidth:"1px",borderColor:"secondary.main"}},...u}})};async function Un(e,t){const n=e.join("/");if(e.length%2===0){const r=jt(Le,...e);return(await Dt(r)).exists()?(await Vt(r),t==null||t({collectionPath:n,deleted:1,total:1}),1):0}else{const r=kt(Le,...e);let o=0;try{o=(await At(r)).data().count}catch(f){console.warn(`Could not count documents in: ${n}`,f)}let u,c=0;for(;;){const f=u?ze(r,qe(Xe.MAX_BATCH_SIZE),Bt(u)):ze(r,qe(Xe.MAX_BATCH_SIZE)),d=(await Pt(f)).docs;if(d.length===0)break;const m=Ft(Le);d.forEach(i=>m.delete(i.ref)),await m.commit(),c+=d.length,u=d[d.length-1],t==null||t({collectionPath:n,deleted:c,total:o})}return c}}async function Hn(e,t){const n=[[ae.USER_STATS,e,ae.DAILY_SESSIONS],[ae.USER_STATS,e,ae.SESSION_GAPS],[ae.USER_SESSIONS,e,ae.SESSIONS],[ae.USER_SETTINGS,e]];for(const r of n)await Un(r,t)}const Gn="_ModalBackdrop_1v2wn_1",Wn="_ConfirmBackdrop_1v2wn_2",$n="_Modal_1v2wn_1",Kn="_ConfirmBox_1v2wn_13",Xn="_Button_1v2wn_32",be={ModalBackdrop:Gn,ConfirmBackdrop:Wn,Modal:$n,ConfirmBox:Kn,Button:Xn};function zn({userId:e}){const[t,n]=s.useState(!1),[r,o]=s.useState(!1),[u,c]=s.useState(null),[f,l]=s.useState(!1),d=()=>{n(!0)},m=()=>{n(!1)},i=async()=>{e&&(n(!1),o(!0),await Hn(e,w=>{c(w)}),c(null),l(!0))},y=async()=>{o(!1),l(!1),await ot()};return a.jsxs(a.Fragment,{children:[a.jsx(fe,{sx:{bgcolor:me.palette.error.main},variant:"outlined",onClick:d,fullWidth:!0,children:a.jsxs(U,{className:be.Button,children:[a.jsx(xt,{fontSize:"small",className:te.MaterialIcon}),a.jsx("span",{children:" Delete My Data"})]})}),r&&a.jsx(U,{className:be.ModalBackdrop,children:a.jsx(U,{className:be.Modal,children:f?a.jsxs(a.Fragment,{children:[a.jsx(yt,{className:te.MaterialIcon,fontSize:"large",sx:{color:me.palette.success.main}}),a.jsx(re,{variant:"h5",mb:2,children:"Deletion Complete"}),a.jsx(fe,{variant:"contained",color:"success",onClick:y,children:"OK"})]}):a.jsxs(a.Fragment,{children:[a.jsx(re,{variant:"h5",mb:2,children:"Deleting Your Data"}),a.jsx(re,{variant:"body1",mb:2,sx:{wordBreak:"break-word",overflowWrap:"break-word",maxWidth:"100%"},children:u?`${u.deleted} / ${u.total} deleted from ${u.collectionPath}`:"Starting"})]})})}),t&&a.jsx(U,{className:be.ConfirmBackdrop,children:a.jsxs(U,{className:be.ConfirmBox,children:[a.jsx(bt,{className:te.MaterialIcon,fontSize:"large",sx:{color:me.palette.warning.main}}),a.jsx(re,{variant:"h5",mb:2,children:"Are you sure you want to delete all your data?"}),a.jsx(fe,{sx:{bgcolor:me.palette.error.main},onClick:i,children:"Yes, Delete Everything"}),a.jsx(fe,{onClick:m,children:"Cancel"})]})})]})}const qn="_LoadingContainer_c2vdk_1",Yn="_SettingsContainer_c2vdk_9",Zn="_SettingsContent_c2vdk_16",Jn="_SettingsSection_c2vdk_26",Qn="_SectionHeader_c2vdk_34",er="_SettingsItem_c2vdk_40",tr="_ButtonContainer_c2vdk_48",nr="_Button_c2vdk_48",G={LoadingContainer:qn,SettingsContainer:Yn,SettingsContent:Zn,SettingsSection:Jn,SectionHeader:Qn,SettingsItem:er,ButtonContainer:tr,Button:nr},rr={hidden:{opacity:0,x:-20},visible:e=>({opacity:1,x:0,transition:{delay:e*.1,duration:.4,ease:"easeOut"}})},_e=({children:e,index:t,className:n})=>a.jsx(st.div,{className:n,variants:rr,initial:"hidden",animate:"visible",custom:t,children:e});function dr(){const n=Oe(S=>S.settings),r=Oe(S=>S.updateTargetDuration),o=Nt(S=>S.user),u=Oe(S=>S.updateName),c=()=>n?Math.floor(n.targetDuration/3600):0,f=()=>n?Math.floor(n.targetDuration/60%60):0,[l,d]=s.useState(c()),[m,i]=s.useState(f()),[y,w]=s.useState((n==null?void 0:n.name)||""),[g,I]=s.useState(!1);s.useEffect(()=>{if(n!==null){const S=n.targetDuration;d(Math.floor(S/3600)),i(Math.floor(S%3600/60)),w(n.name),I(!1)}},[n]);const _=S=>{S!==null&&(d(Math.min(S,744)),I(!0))},M=S=>{S!==null&&(i(Math.min(S,59)),I(!0))},T=S=>{S!==null&&(w(S),I(!0))},V=async()=>{R();try{await Tt(),I(!1)}catch(S){console.error("Error saving user settings:",S)}},R=()=>{const S=l*3600+m*60;r(S),u(y)};return n?a.jsxs(U,{className:G.SettingsContainer,children:[a.jsxs(_e,{className:te.Header,index:0,children:[a.jsx(vt,{className:te.MaterialIcon,fontSize:"large"}),a.jsx(re,{variant:"h2",children:"Settings"})]}),a.jsxs(U,{className:G.SettingsContent,children:[a.jsxs(_e,{index:1,className:G.SettingsSection,children:[a.jsxs(U,{className:G.SectionHeader,children:[a.jsx(Rt,{className:te.MaterialIcon,fontSize:"medium"}),a.jsx(re,{variant:"h3",children:"Timer"})]}),a.jsxs(U,{className:G.SettingsItem,children:[a.jsx("label",{children:"Hours"}),a.jsx(rt,{value:l,onChange:_,min:0,max:744})]}),a.jsxs(U,{className:G.SettingsItem,children:[a.jsx("label",{children:"Minutes"}),a.jsx(rt,{value:m,onChange:M,min:0,max:59})]})]}),a.jsxs(_e,{index:2,className:G.SettingsSection,children:[a.jsxs(U,{className:G.SectionHeader,children:[a.jsx(Ct,{className:te.MaterialIcon,fontSize:"medium"}),a.jsx(re,{variant:"h3",children:"Account"})]}),a.jsxs(U,{className:G.SettingsItem,children:[a.jsx("label",{children:"Email"}),a.jsx(re,{sx:{color:me.palette.grey[400]},children:n.email})]}),a.jsxs(U,{className:G.SettingsItem,children:[a.jsx("label",{children:"Name"}),a.jsx(On,{value:y,onChange:T})]})]}),a.jsx(_e,{index:3,children:a.jsxs(U,{className:G.SettingsSection,children:[a.jsx(zn,{userId:o==null?void 0:o.uid}),a.jsx(fe,{sx:{bgcolor:me.palette.error.main},variant:"contained",onClick:ot,fullWidth:!0,children:a.jsxs(U,{className:G.Button,children:[a.jsx(Et,{fontSize:"small",className:te.MaterialIcon}),a.jsx("span",{children:" Sign Out"})]})})]})})]}),a.jsx(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.4},className:G.ButtonContainer,children:a.jsx(fe,{variant:"contained",color:"primary",disabled:!g,onClick:V,fullWidth:!0,children:a.jsxs(U,{className:G.Button,children:[a.jsx(wt,{fontSize:"small",className:te.MaterialIcon}),a.jsx("span",{children:"Save"})]})})})]}):a.jsx(U,{className:G.LoadingContainer,children:a.jsx(_t,{})})}export{dr as default};
